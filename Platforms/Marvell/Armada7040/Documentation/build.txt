Build instructions
------------------

1. Clone into edk2 and opp repositories.
2. Link opp as OpenPlatformPkg in edk2:
  ln -s /home/user/git/opp /home/user/git/edk2/OpenPlatformPkg
3. Prepare environment:
Set GCC48_AARCH64_PREFIX to path to your cross compiler, i.e.:
  export GCC48_AARCH64_PREFIX=/opt/gcc-linaro-aarch64-none-elf-4.8-2014.04_linux/bin/aarch64-none-elf-
4. Run edk2-build.sh:
  ./edk2-build.sh -b DEBUG -p Armada7040
5. Copy image into TFTP location:
  scp Build/Armada7040/DEBUG_GCC48/FV/ARMADA7040_EFI.bin /tftp_directory

Apart from .bin file, .img file is created for SPI Flash.

Launching in U-Boot
-------------------
After these steps UEFI can be launched from U-Boot:
  tftpboot 0x0 ARMADA7040_EFI.bin
  go 0x0

Embedding files in FV
---------------------
Firmware Volume (FV) allows to attach any files to UEFI image. These files
could be used then from UEFI shell.

Modify Armada7040.fdf file, adding:

  FILE FREEFORM = 5807a6cc-a7e0-46b5-8e68-6ab0c221e950 {
  	SECTION RAW = filename
  	SECTION UI = "visible_name"
  }

In this case, file 'filename' from edk2 main directory is attached
as 'visible_name'. GUID should be replaced with random one.

To access file from UEFI shell, type:
  fs1:
  ls
