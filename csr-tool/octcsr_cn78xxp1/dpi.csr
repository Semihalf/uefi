# -*- csr3 -*-
# You must run "csr3 rtl" after editing this file!
---
name: DPI
enums:
  - name: DPI_HDR_PT_E
    attributes:
      width: "2"
    description: Pointer type.
    values:
      - name: DPI_HDR_PT_ZBW_CA
        value: 0x0
        description: Zero-byte-write with cache allocate

      - name: DPI_HDR_PT_ZBW_NC
        value: 0x1
        description: Zero-byte-write with no cache allocate

      - name: DPI_HDR_PT_WQP
        value: 0x2
        description: Pointer is work queue entry pointer for SSO

      - name: DPI_HDR_PT_CNT
        value: 0x3
        description: |
          PTR<5:0> indicates which counter to increment.


  - name: DPI_INTSN_E
    attributes:
      width: "20"
    description: FIXME the interrupt list is not complete.
    values:
      - name: DPI_INT_NDERR
        value: 0xDF000
        description: See DPI_INT_REG[NDERR].

      - name: DPI_INT_NFOVR
        value: 0xDF001
        description: See DPI_INT_REG[NFOVR].

      - name: DPI_INT_DMADBO(0..7)
        value: 0xDF002 + a
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[DMADBO<a>].

      - name: DPI_INT_REQ_BADADR
        value: 0xDF00A
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_BADADR].

      - name: DPI_INT_REQ_BADLEN
        value: 0xDF00B
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_BADLEN].

      - name: DPI_INT_REQ_OVFLW
        value: 0xDF00C
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_OVRFLW].

      - name: DPI_INT_REQ_UNDFLW
        value: 0xDF00D
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_UNDFLW].

      - name: DPI_INT_REQ_ANULL
        value: 0xDF00E
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_ANULL].

      - name: DPI_INT_REQ_INULL
        value: 0xDF00F
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_INULL].

      - name: DPI_INT_REQ_BADFIL
        value: 0xDF010
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_BADFIL].

      - name: DPI_INT_SPRT0_RST
        value: 0xDF011
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[SPRT0_RST].

      - name: DPI_INT_SPRT1_RST
        value: 0xDF012
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[SPRT1_RST].

      - name: DPI_INT_SPRT2_RST
        value: 0xDF013
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[SPRT2_RST].

      - name: DPI_INT_SPRT3_RST
        value: 0xDF014
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[SPRT3_RST].


structs:
  - name: DPI_DMA_INSTR_HDR_S
    description: DPI DMA Instruction Header Format
    fields:
      - name: AURA
        bits: w0(11..0)
        description: |
          New field for 78xx.
          FPA Aura.  Indicates the AURA sent to FPA when HW determines that buffers are to be freed
          based on FL, II, and LocalPtr[I].

      - name: --
        bits: w0(15..12)
        description: Reserved for extending AURA.

      - name: TT
        bits: w0(17..16)
        description: |
          New field for 78xx.
          SSO Tag Type.  Sent to SSO upon instruction completion if PT == DPI_HDR_PT_WQP.

      - name: GRP
        bits: w0(27..18)
        description: SSO Group.  Sent to SSO upon instruction completion if PT == DPI_HDR_PT_WQP.

      - name: --
        bits: w0(29..28)
        description: Reserved for extending GRP.

      - name: --
        bits: w0(31..30)
        description: Reserved.

      - name: NFST
        bits: w0(35..32)
        description: |
          See HRM.
          Number of first pointers.

      - name: --
        bits: w0(36)
        description: Reserved for extending NFST.

      - name: --
        bits: w0(37)
        description: Reserved.

      - name: NLST
        bits: w0(41..38)
        description: |
          See HRM.
          Number of last pointers.

      - name: --
        bits: w0(42)
        description: Reserved for extending NLST.

      - name: --
        bits: w0(43)
        description: Reserved.

      - name: PT
        bits: w0(45..44)
        description: |
          Formerly WPQ.  See WQP description for most.  Add two flavors of cached and uncached ZBW.
          Pointer type.  Determines the contents of the PTR field.  See DPI_HDR_PT_E.

      - name: --
        bits: w0(46)
        description: Reserved for extending PT.

      - name: FL
        bits: w0(47)
        description: |
          See HRM.
          Free local pointer.

      - name: II
        bits: w0(48)
        description: |
          See HRM.
          Ignore local pointer invert bit.

      - name: FI
        bits: w0(49)
        description: |
          See HRM.
          Force interrupt.

      - name: CA
        bits: w0(50)
        description: |
          See HRM.
          Counter add.

      - name: CSEL
        bits: w0(51)
        description: |
          Formerly C.  See HRM.
          Counter select.

      - name: XTYPE
        bits: w0(53..52)
        description: |
          Formerly TYPE.  See HRM.
          Transfer type.
          0 = Outbound
          1 = Inbound
          2 = Internal-only
          3 = External-only

      - name: --
        bits: w0(55..54)
        description: Reserved for extending TYPE.

      - name: FPORT
        bits: w0(57..56)
        description: |
          See HRM.
          First port.

      - name: --
        bits: w0(59..58)
        description: Reserved for extending FPORT.

      - name: LPORT
        bits: w0(61..60)
        description: |
          See HRM.
          Last port.

      - name: --
        bits: w0(63..62)
        description: Reserved for extending LPORT.

      - name: PTR
        bits: w1(41..0)
        description: |
          See HRM.
          Pointer.

      - name: --
        bits: w1(47..42)
        description: Reserved for extending PTR.

      - name: --
        bits: w1(63..48)
        description: Reserved.


  - name: DPI_DMA_LOCAL_PTR_S
    description: DPI DMA Local Pointer Format
    fields:
      - name: PTR
        bits: 41..0
        description: |
          See HRM.
          Pointer.

      - name: --
        bits: 46..42
        description: Reserved for extending PTR.

      - name: L
        bits: 47
        description: |
          See HRM.
          Little endian.

      - name: SIZE
        bits: 60..48
        description: |
          See HRM.
          Size.

      - name: AC
        bits: 61
        description: |
          Formetly A.  See HRM.
          Allocate L2.

      - name: F
        bits: 62
        description: |
          See HRM.
          Full cacheline write.

      - name: I
        bits: 63
        description: |
          See HRM.
          Invert free.


registers:
  - name: DPI_BIST_STATUS
    address: 0x1DF0000000000
    bus: NCB
    fields:
      - name: --
        bits: 63..45
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: BIST
        bits: 44..0
        access: RO
        reset: 0x0
        typical: 0x0
        description: |
          BIST Results.
          HW sets a bit in BIST for for memory that fails
          BIST.


  - name: DPI_INT_REG
    address: 0x1DF0000000008
    bus: NCB
    fields:
      - name: --
        bits: 63..28
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: SPRT3_RST
        bits: 27
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset. Throws DPI_INTSN_E::SPRT3_RST.
          this bit is set.

      - name: SPRT2_RST
        bits: 26
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset. Throws DPI_INTSN_E::SPRT2_RST.
          this bit is set.

      - name: SPRT1_RST
        bits: 25
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set. Throws DPI_INTSN_E::SPRT1_RST.

      - name: SPRT0_RST
        bits: 24
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set. Throws DPI_INTSN_E::SPRT0_RST.

      - name: --
        bits: 23
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: REQ_BADFIL
        bits: 22
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction unexpected fill
          Instruction fill when none outstanding. Throws DPI_INTSN_E::REQ_BADFIL.

      - name: REQ_INULL
        bits: 21
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction filled with NULL pointer
          Next pointer was NULL. Throws DPI_INTSN_E::REQ_INULL.

      - name: REQ_ANULL
        bits: 20
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction filled with bad instruction
          Fetched instruction word was 0. Throws DPI_INTSN_E::REQ_ANULL.

      - name: REQ_UNDFLW
        bits: 19
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction FIFO underflow
          DPI tracks outstanding instructions fetches.
          Interrupt will fire when FIFO underflows. Throws DPI_INTSN_E::REQ_UNDFLW.

      - name: REQ_OVRFLW
        bits: 18
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction FIFO overflow
          DPI tracks outstanding instructions fetches.
          Interrupt will fire when FIFO overflows. Throws DPI_INTSN_E::REQ_OVRFLW.

      - name: REQ_BADLEN
        bits: 17
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction fetch with length
          Interrupt will fire if DPI forms an instruction
          fetch with length of zero. Throws DPI_INTSN_E::REQ_BADLEN.

      - name: REQ_BADADR
        bits: 16
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction fetch with bad pointer
          Interrupt will fire if DPI forms an instruction
          fetch to the NULL pointer. Throws DPI_INTSN_E::REQ_BADADR.

      - name: DMADBO
        bits: 15..8
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          DMAx doorbell overflow.
          DPI has a 32-bit counter for each request's queue
          outstanding doorbell counts. Interrupt will fire
          if the count overflows. Throws DPI_INTSN_E::DPI_INT_DMADBO.

      - name: --
        bits: 7..2
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: NFOVR
        bits: 1
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          CSR Fifo Overflow
          DPI can store upto 16 CSR request.  The FIFO will
          overflow if that number is exceeded. Throws DPI_INTSN_E::DPI_INT_NFOVR.

      - name: NDERR
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          NCB Decode Error
          DPI received a NCB transaction on the outbound
          bus to the DPI deviceID, but the command was not
          recognized. Throws DPI_INTSN_E::DPI_INT_NDERR.


  - name: DPI_INT_EN
    address: 0x1DF0000000010
    bus: NCB
    fields:
      - name: --
        bits: 63..28
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: SPRT3_RST
        bits: 27
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT2_RST
        bits: 26
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT1_RST
        bits: 25
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT0_RST
        bits: 24
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: --
        bits: 23
        access: R/W
        reset: --
        typical: --
        description: Reserved.

      - name: REQ_BADFIL
        bits: 22
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction unexpected fill

      - name: REQ_INULL
        bits: 21
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction filled with NULL pointer

      - name: REQ_ANULL
        bits: 20
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction filled with bad instruction

      - name: REQ_UNDFLW
        bits: 19
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction FIFO underflow

      - name: REQ_OVRFLW
        bits: 18
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction FIFO overflow

      - name: REQ_BADLEN
        bits: 17
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction fetch with length

      - name: REQ_BADADR
        bits: 16
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction fetch with bad pointer

      - name: DMADBO
        bits: 15..8
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: DMAx doorbell overflow.

      - name: --
        bits: 7..2
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Reserved.

      - name: NFOVR
        bits: 1
        access: R/W
        reset: 0
        typical: 0
        description: CSR Fifo Overflow

      - name: NDERR
        bits: 0
        access: R/W
        reset: 0
        typical: 0
        description: NCB Decode Error


  - name: DPI_ECC_CTL0
    title: DPI ECC Control Register
    address: 0x1DF0000000018
    bus: NCB
    description: This register allows inserting ECC errors for testing.
    fields:
      - name: --
        bits: 63..23
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: RAM_CDIS
        bits: 22..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: RAM ECC correction disable. Each bit corresponds to a different RAM.


  - name: DPI_ECC_CTL1
    title: DPI ECC Control Register
    address: 0x1DF0000000020
    bus: NCB
    description: This register allows inserting ECC errors for testing.
    fields:
      - name: --
        bits: 63..55
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: RAM_FLIP1
        bits: 54..32
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Flip syndrome bits on write. Flip syndrome bits <1> on writes to the corresponding ram to
          test single-bit or double-bit error handling.

      - name: --
        bits: 31..23
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: RAM_FLIP0
        bits: 22..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Flip syndrome bits on write. Flip syndrome bits <0> on writes to the corresponding ram to
          test single-bit or double-bit error handling.


  - name: DPI_CTL
    address: 0x1DF0000000040
    bus: NCB
    fields:
      - name: --
        bits: 63..1
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 0
        access: R/W
        reset: 0
        typical: 1
        description: Turns on the DMA and Packet state machines


  - name: DPI_DMA_CONTROL
    address: 0x1DF0000000048
    bus: NCB
    description: |
      DMA Control Register: Controls operation of the DMA IN/OUT.
    fields:
      - name: --
        bits: 63..62
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: DICI_MODE
        bits: 61
        access: R/W
        reset: 0
        typical: --
        description: |
          DMA Instruction Completion Interrupt Mode
          turns on mode to increment DPI_DMA_PPx_CNT
          counters.

      - name: --
        bits: 60
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: FFP_DIS
        bits: 59
        access: R/W
        reset: 0
        typical: 0
        description: |
          Force forward progress disable
          The DMA engines will compete for shared resources.
          If the HW detects that particular engines are not
          able to make requests to an interface, the HW
          will periodically trade-off throughput for
          fairness.

      - name: COMMIT_MODE
        bits: 58
        access: R/W
        reset: 0
        typical: 1
        description: |
          DMA Engine Commit Mode
          When COMMIT_MODE=0, DPI considers an instruction
          complete when the HW internally generates the
          final write for the current instruction.
          When COMMIT_MODE=1, DPI additionally waits for
          the final write to reach the interface coherency
          point to declare the instructions complete.
          Please note: when COMMIT_MODE == 0, DPI may not
          follow the HRM ordering rules.
          DPI hardware performance may be better with
          COMMIT_MODE == 0 than with COMMIT_MODE == 1 due
          to the relaxed ordering rules.
          If the HRM ordering rules are required, set
          COMMIT_MODE == 1.

      - name: --
        bits: 57
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: PKT_EN
        bits: 56
        access: R/W
        reset: 0
        typical: --
        description: |
          Enables the packet interface.
          When the packet interface is enabled, engines 4 and 5
          are used for packets and are not available for DMA.
          When PKT_EN=1, then DMA_ENB<5>=0 and DMA_ENB<4>=0.

      - name: --
        bits: 55..54
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: DMA_ENB
        bits: 53..48
        access: R/W
        reset: 0x0
        typical: 0x3f
        description: |
          DMA engine enable. Enables the operation of the
          DMA engine. After being enabled an engine should
          not be disabled while processing instructions.
          When PKT_EN=1, then DMA_ENB<5>=0 and DMA_ENB<4>=0.

      - name: --
        bits: 47..34
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: B0_LEND
        bits: 33
        access: R/W
        reset: 0
        typical: 0
        description: |
          When set '1' and the DPI is in the mode to write
          0 to L2C memory when a DMA is done, the address
          to be written to will be treated as a Little
          Endian address.

      - name: DWB_DENB
        bits: 32
        access: R/W
        reset: 0
        typical: 1
        description: |
          When set '1', DPI will send a value in the DWB
          field for a free page operation for the memory
          that contained the data.

      - name: DWB_ICHK
        bits: 31..23
        access: R/W
        reset: 0x0
        typical: --
        description: |
          When Instruction Chunks for DMA operations are
          freed this value is used for the DWB field of the
          operation.

      - name: FPA_QUE
        bits: 22..20
        access: R/W
        reset: 0x0
        typical: --
        description: |
          The FPA queue that the instruction-chunk page will
          be returned to when used.

      - name: O_ADD1
        bits: 19
        access: R/W
        reset: 0
        typical: 1
        description: |
          When set '1' 1 will be added to the SLI_DMA@_CNT
          DMA counters, if '0' then the number of bytes
          in the dma transfer will be added to the
          SLI_DMA@_CNT count register.

      - name: O_RO
        bits: 18
        access: R/W
        reset: 0
        typical: --
        description: Relaxed Ordering Mode for DMA.

      - name: O_NS
        bits: 17
        access: R/W
        reset: 0
        typical: --
        description: Nosnoop For DMA.

      - name: O_ES
        bits: 16..15
        access: R/W
        reset: 0x0
        typical: --
        description: Endian Swap Mode for DMA.

      - name: O_MODE
        bits: 14
        access: R/W
        reset: 0
        typical: 1
        description: |
          Select PCI_POINTER MODE to be used.
          0=DPTR format 1 is used
          use register values for address and pointer
          values for ES, NS, RO
          1=DPTR format 0 is used
          use pointer values for address and register
          values for ES, NS, RO

      - name: --
        bits: 13..0
        access: ---
        reset: --
        typical: --
        description: Reserved.


  - name: DPI_REQ_GBL_EN
    address: 0x1DF0000000050
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: QEN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Indicates which instruction queues are enabled and
          can dispatch instructions to a requesting engine.


  - name: DPI_REQ_ERR_RSP
    address: 0x1DF0000000058
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: QERR
        bits: 7..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue received an
          ErrorResponse from the I/O subsystem.
          SW must clear the bit before the the cooresponding
          instruction queue will continue processing
          instructions if DPI_REQ_ERR_RSP_EN[EN] is set.


  - name: DPI_REQ_ERR_RST
    address: 0x1DF0000000060
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: QERR
        bits: 7..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue dropped an
          instruction because the source or destination
          was in reset.
          SW must clear the bit before the the cooresponding
          instruction queue will continue processing
          instructions if DPI_REQ_ERR_RST_EN[EN] is set.


  - name: DPI_REQ_ERR_RSP_EN
    address: 0x1DF0000000068
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Indicates which instruction queues should stop
          dispatching instructions when an  ErrorResponse
          is received from the I/O subsystem.


  - name: DPI_REQ_ERR_RST_EN
    address: 0x1DF0000000070
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Indicates which instruction queues should stop
          dispatching instructions when an instruction
          is dropped because the source or destination port
          is in reset.


  - name: DPI_PKT_ERR_RSP
    address: 0x1DF0000000078
    bus: NCB
    fields:
      - name: --
        bits: 63..1
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: PKTERR
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Indicates that an ErrorResponse was received from
          the I/O subsystem.


  - name: DPI_DMA_ENG(0..5)_EN
    address: 0x1DF0000000080 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: QEN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Controls which logical instruction queues can be
          serviced by the DMA engine. Setting QEN==0
          effectively disables the engine.
          When DPI_DMA_CONTROL[PKT_EN] = 1, then
          DPI_DMA_ENG5_EN[QEN] and
          DPI_DMA_ENG4_EN[QEN] must be zero.


  - name: DPI_DMA(0..7)_REQQ_CTL
    address: 0x1DF0000000180 + a*0x8
    bus: NCB
    description: |
      DMA Request Queue Control: Control bits for transactions on the eight request queues.
    fields:
      - name: --
        bits: 63..9
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: ST_CMD
        bits: 8
        access: R/W
        reset: 0
        typical: 0
        description: |
          When the DPI issues a store full line command to the L2C that is to be cached,
          this field select the type of store command to use:
          0 - STF
          1 - STY

      - name: --
        bits: 7..2
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: LD_CMD
        bits: 1..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          When the DPI issues a load command to the L2C that is to be cached,
          this field select the type of load command to use:
          0 - LDD
          1 - LDI
          2 - LDE
          3 - LDY


  - name: DPI_DMA(0..7)_DBELL
    address: 0x1DF0000000200 + a*0x8
    bus: NCB
    description: |
      DMA Door Bell: The door bell register for DMA[0..7] queue.
    attributes:
      regtest_skip: "True"
    fields:
      - name: --
        bits: 63..16
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: DBELL
        bits: 15..0
        access: WO/H
        reset: 0x0
        typical: --
        description: |
          The value written to this register is added to the
          number of 8byte words to be read and processes for
          the low priority dma queue.


  - name: DPI_DMA(0..7)_IBUFF_SADDR
    address: 0x1DF0000000280 + a*0x8
    bus: NCB
    description: |
      DMA Instruction Buffer Starting Address: The address to start reading Instructions from for
      DMA[0..7].
    fields:
      - name: IDLE
        bits: 63
        access: RO/H
        reset: 1
        typical: --
        description: DMA Request Queue is IDLE

      - name: --
        bits: 62
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: CSIZE
        bits: 61..48
        access: R/W
        reset: 0x40
        typical: --
        description: |
          The size in 8B words of the DMA Instruction Chunk.
          This value should only be written at known times
          in order to prevent corruption of the instruction
          queue.  The minimum CSIZE is 16 (one cacheblock).

      - name: --
        bits: 47..42
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: SADDR
        bits: 41..7
        access: R/W/H
        reset: 0x0
        typical: --
        description: |
          The 128 byte aligned starting or chunk address.
          SADDR is address bits 41:7 of the starting
          instructions address. When new chunks are fetched
          by the HW, SADDR will be updated to reflect the
          address of the current chunk.
          A write to SADDR resets both the queue's doorbell
          (DPI_DMAx_COUNTS[DBELL) and its tail pointer
          (DPI_DMAx_NADDR[ADDR]).

      - name: --
        bits: 6..0
        access: ---
        reset: --
        typical: --
        description: Reserved.


  - name: DPI_DMA(0..7)_COUNTS
    address: 0x1DF0000000300 + a*0x8
    bus: NCB
    description: |
      DMA Instruction Counts: Values for determing the number of instructions for DMA[0..7] in the
      DPI.
    fields:
      - name: --
        bits: 63..39
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: FCNT
        bits: 38..32
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: |
          Number of words in the Instruction FIFO locally
          cached within DPI.

      - name: DBELL
        bits: 31..0
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: Number of available words of Instructions to read.


  - name: DPI_DMA(0..7)_NADDR
    address: 0x1DF0000000380 + a*0x8
    bus: NCB
    description: |
      DMA Next Ichunk Address: Place DPI will read the next Ichunk data from.
    fields:
      - name: --
        bits: 63..42
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: ADDR
        bits: 41..0
        access: RO/H
        reset: 0x0
        typical: --
        description: |
          "The next L2C address to read DMA# instructions
          from."


  - name: DPI_DMA(0..7)_REQBNK0
    address: 0x1DF0000000400 + a*0x8
    bus: NCB
    description: |
      DMA Request State Bank0: Current contents of the request state machine - bank0
    fields:
      - name: STATE
        bits: 63..0
        access: RO/H
        reset: 0x0
        typical: --
        description: State


  - name: DPI_DMA(0..7)_REQBNK1
    address: 0x1DF0000000480 + a*0x8
    bus: NCB
    description: |
      DMA Request State Bank1: Current contents of the request state machine - bank1
    fields:
      - name: STATE
        bits: 63..0
        access: RO/H
        reset: 0x0
        typical: --
        description: State


  - name: DPI_NCB(0..0)_CFG
    address: 0x1DF0000000800 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..6
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: MOLR
        bits: 5..0
        access: R/W
        reset: 0x20
        typical: 0x20
        description: |
          Max Outstanding Load Requests
          Limits the number of oustanding load requests on
          the NCB interface.  This value can range from 1
          to 32. Setting a value of 0 will halt all read
          traffic to the NCB interface.  There are no
          restrictions on when this value can be changed.


  - name: DPI_PINT_INFO
    address: 0x1DF0000000830
    bus: NCB
    description: |
      DPI Packet Interrupt Info: DPI Packet Interrupt Info.
    fields:
      - name: --
        bits: 63..14
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: IINFO
        bits: 13..8
        access: RO/H
        reset: 0x0
        typical: --
        description: Packet Instruction Doorbell count overflow info

      - name: --
        bits: 7..6
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: SINFO
        bits: 5..0
        access: RO/H
        reset: 0x0
        typical: --
        description: Packet Scatterlist Doorbell count overflow info


  - name: DPI_REQ_ERR_SKIP_COMP
    address: 0x1DF0000000838
    bus: NCB
    fields:
      - name: --
        bits: 63..24
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: EN_RST
        bits: 23..16
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue should skip the
          completion  phase once an port reset is
          detected as indicated by DPI_REQ_ERR_RST.  All
          completions to the effected instruction queue
          will be skipped as long as
          DPI_REQ_ERR_RSP[QERR<ique>] & EN_RSP<ique> or
          DPI_REQ_ERR_RST[QERR<ique>] & EN_RST<ique> are
          set.

      - name: --
        bits: 15..8
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: EN_RSP
        bits: 7..0
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue should skip the
          completion  phase once an ErrorResponse is
          detected as indicated by DPI_REQ_ERR_RSP.  All
          completions to the effected instruction queue
          will be skipped as long as
          DPI_REQ_ERR_RSP[QERR<ique>] & EN_RSP<ique> or
          DPI_REQ_ERR_RST[QERR<ique>] & EN_RST<ique> are
          set.


  - name: DPI_ENG(0..5)_BUF
    address: 0x1DF0000000880 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..37
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: COMPBLKS
        bits: 36..32
        access: RO/H
        reset: --
        typical: --
        description: Computed engine block size

      - name: --
        bits: 31..9
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: BASE
        bits: 8..4
        access: RO/H
        reset: --
        typical: --
        description: The base address in 512B blocks of the engine fifo

      - name: BLKS
        bits: 3..0
        access: R/W
        reset: 0x2
        typical: --
        description: |
          The size of the engine fifo
          Legal values are 0-10.
          0  = Engine is disabled
          1  = 0.5KB buffer
          2  = 1.0KB buffer
          3  = 1.5KB buffer
          4  = 2.0KB buffer
          5  = 2.5KB buffer
          6  = 3.0KB buffer
          7  = 3.5KB buffer
          8  = 4.0KB buffer
          9  = 6.0KB buffer
          10 = 8.0KB buffer


  - name: DPI_SLI_PRT(0..3)_CFG
    address: 0x1DF0000000900 + a*0x8
    bus: NCB
    description: |
      DPI SLI Port Configuration: Configures the Max Read Request Size, Max Paylod Size, and Max
      Number of SLI Tags in use
    fields:
      - name: --
        bits: 63..25
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: HALT
        bits: 24
        access: RO/H
        reset: 0
        typical: 0
        description: |
          When set, HALT indicates that the MAC has detected
          a reset condition. No further instructions that
          reference the MAC from any instruction Q will be
          issued until the MAC comes out of reset and HALT
          is cleared in SLI_CTL_PORTx[DIS_PORT].

      - name: --
        bits: 23..21
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: QLM_CFG
        bits: 20
        access: RO/H
        reset: --
        typical: --
        description: |
          Read only copy of the QLM CFG pin
          Since QLM_CFG is simply a copy of the QLM CFG
          pins, it may reflect values that are not normal
          for DMA or packet operations. QLM_CFG does not
          indicate if a port is disabled.
          GSERx_CFG can be used for more complete QLM
          configuration        information.
          0 = MAC is PCIe
          1 = Reserved

      - name: --
        bits: 19..17
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: RD_MODE
        bits: 16
        access: R/W
        reset: 0
        typical: 0
        description: |
          Read Mode
          0=Exact Read Mode
          The HW reads on a
          4B granularity.  In this mode, the HW may break
          a given read into 3 operations to satisify
          PCIe rules.
          1=Block Mode
          The HW will read more data than requested in
          order to minimize the number of operations
          necessary to complete the operation.
          The memory region must be memory like.

      - name: --
        bits: 15..14
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: MOLR
        bits: 13..8
        access: R/W
        reset: 0x20
        typical: 0x20
        description: |
          Max Outstanding Load Requests
          Limits the number of oustanding load requests on
          the port by restricting the number of tags
          used by the SLI to track load responses.  This
          value can range from 1 to 32. Setting a value of
          0 will halt all read traffic to the port.  There
          are no restrictions on when this value
          can be changed.

      - name: MPS_LIM
        bits: 7
        access: R/W
        reset: 0
        typical: 0
        description: |
          MAC memory space write requests cannot cross the
          (naturally-aligned) MPS boundary.
          When clear, DPI is allowed to issue a MAC memory
          space read that crosses the naturally-aligned
          boundary of size defined by MPS. (DPI will still
          only cross the boundary when it would eliminate a
          write by doing so.)
          When set, DPI will never issue a MAC memory space
          write that crosses the naturally-aligned boundary
          of size defined by MPS.

      - name: --
        bits: 6..5
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: MPS
        bits: 4
        access: R/W
        reset: 0
        typical: 0
        description: |
          Max Payload Size
          0 = 128B
          1 = 256B
          This MPS size must not exceed
          the size selected by PCIE*_CFG030[MPS].

      - name: MRRS_LIM
        bits: 3
        access: R/W
        reset: 0
        typical: 0
        description: |
          MAC memory space read requests cannot cross the
          (naturally-aligned) MRRS boundary.
          When clear, DPI is allowed to issue a MAC memory
          space read that crosses the naturally-aligned
          boundary of size defined by MRRS. (DPI will still
          only cross the boundary when it would eliminate a
          read by doing so.)
          When set, DPI will never issue a MAC memory space
          read that crosses the naturally-aligned boundary
          of size defined by MRRS.

      - name: --
        bits: 2
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: MRRS
        bits: 1..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Max Read Request Size
          0 = 128B
          1 = 256B
          2 = 512B
          3 = 1024B
          This MRRS size must not exceed
          the size selected by PCIE*_CFG030[MRRS].


  - name: DPI_SLI_PRT(0..3)_ERR
    address: 0x1DF0000000920 + a*0x8
    bus: NCB
    description: |
      DPI SLI Port Error: Logs the Address and Request Queue associated with the reported SLI error
      response
    fields:
      - name: ADDR
        bits: 63..3
        access: RO/H
        reset: 0x0
        typical: --
        description: |
          Address of the failed load request.
          Address is locked along with the
          DPI_SLI_PRTx_ERR_INFO register.
          See the DPI_SLI_PRTx_ERR_INFO[LOCK] description
          for further information.

      - name: --
        bits: 2..0
        access: ---
        reset: --
        typical: --
        description: Reserved.


  - name: DPI_SLI_PRT(0..3)_ERR_INFO
    address: 0x1DF0000000940 + a*0x8
    bus: NCB
    description: |
      DPI SLI Port Error Info: Logs the Address and Request Queue associated with the reported SLI
      error response
    fields:
      - name: --
        bits: 63..23
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: VF
        bits: 22..16
        access: RO/H
        reset: 0x0
        typical: --
        description: Virtual function that caused the ErrorResponse.

      - name: --
        bits: 15..9
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: LOCK
        bits: 8
        access: RO/H
        reset: 0
        typical: --
        description: |
          DPI_SLI_PRTx_ERR and DPI_SLI_PRTx_ERR_INFO have
          captured and locked contents.
          When Octeon first detects an ErrorResponse, the
          TYPE, REQQ, and ADDR of the error is saved and an
          internal lock state is set so the data associated
          with the initial error is perserved.
          Subsequent ErrorResponses will optionally raise
          an interrupt, but will not modify the TYPE, REQQ,
          or ADDR fields until the internal lock state is
          cleared.
          SW can clear the internal lock state by writting
          a '1' to the appropriate bit in either
          DPI_REQ_ERR_RSP or DPI_PKT_ERR_RSP depending on
          the TYPE field.
          Once the internal lock state is cleared,
          the next ErrorResponse will set the TYPE, REQQ,
          and ADDR for the new transaction.

      - name: --
        bits: 7..5
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: TYPE
        bits: 4
        access: RO/H
        reset: 0
        typical: --
        description: |
          Type of transaction that caused the ErrorResponse.
          0=DMA Instruction
          1=PKT Instruction

      - name: --
        bits: 3
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: REQQ
        bits: 2..0
        access: RO/H
        reset: 0x0
        typical: --
        description: Request queue that made the failed load request.


  - name: DPI_INFO_REG
    address: 0x1DF0000000980
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: FFP
        bits: 7..4
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: Force Forward Progress Indicator

      - name: --
        bits: 3..2
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: NCB
        bits: 1
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          NCB Register Access
          This interrupt will fire in normal operation
          when SW reads a DPI register through the NCB
          interface.

      - name: RSL
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          RSL Register Access
          This interrupt will fire in normal operation
          when SW reads a DPI register through the RSL
          interface.


  - name: DPI_DMA(0..7)_IFLIGHT
    address: 0x1DF0000000A00 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..3
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: CNT
        bits: 2..0
        access: R/W/H
        reset: 0x6
        typical: 0x6
        description: |
          The number of instructions from a given queue that
          can be inflight to the DMA engines at a time.
          Reset value matches the number of DMA engines.


  - name: DPI_DMA(0..7)_ERR_RSP_STATUS
    address: 0x1DF0000000A80 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..6
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: STATUS
        bits: 5..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          QUE captures the ErrorResponse status of the last
          6 instructions for each instruction queue.
          STATUS<5> represents the status for first
          instruction in instruction order while STATUS<0>
          represents the last or most recent instruction.
          If STATUS<n> is set, then the nth instruction in
          the given queue experienced an ErrorResponse.
          Otherwise, it completed normally.


  - name: DPI_DMA_PP(0..47)_CNT
    address: 0x1DF0000000C00 + a*0x8
    bus: NCB
    description: |
      DMA per PP Instr Done Counter:
      When DMA Instruction Completion Interrupt Mode DPI_DMA_CONTROL.DICI_MODE is enabled, every dma
      instruction
      that has the WQP=0 and a PTR value of 1..0x30 will incremrement DPI_DMA_PPx_CNT value-1
      counter.
      Instructions with WQP=0 and PTR values higher then 0x3F will still send a zero byte write.
      Hardware reserves that values 0x31..0x3F for future use and will treat them as a PTR of 0 and
      do nothing.
    fields:
      - name: --
        bits: 63..16
        access: ---
        reset: --
        typical: --
        description: Reserved.

      - name: CNT
        bits: 15..0
        access: R/W/H
        reset: 0x0
        typical: --
        description: |
          Counter incremented according to conditions
          described above and decremented by values written
          to this field.  A CNT of non zero, will cause
          an interrupt in the CIU_SUM1_PP@_IPX register



