# -*- csr3 -*-
# You must run "csr3 rtl" after editing this file!
---
name: MIO_PTP
enums:
  - name: MIO_PTP_INTSN_E
    title: PTP Interrupt Source Enumeration
    attributes:
      width: "20"
    description: Enumerates the different generated interrupts.
    values:
      - name: MIO_PTP_EVT_INT
        value: 0x07000
        description: See MIO_PTP_EVT_INT[EVT_INT].

      - name: MIO_PTP_DPLL_INT
        value: 0x07040
        description: See MIO_PTP_DPLL_ERR_INT[DPLL_INT].


registers:
  - name: MIO_PTP_CLOCK_CFG
    title: PTP Clock Configuration Register
    address: 0x1070000000F00
    bus: NCB
    description: This register configures the timestamp architecture. See MIO_PTP Registers for address
    fields:
      - name: --
        bits: 63..42
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: PPS
        bits: 41
        access: RO/H
        reset: --
        typical: 0
        description: PTP PPS output; reflects ptp__pps after PPS_INV inverter.

      - name: CKOUT
        bits: 40
        access: RO/H
        reset: --
        typical: 0
        description: PTP clock output; reflects ptp__ckout after CKOUT_INV inverter.

      - name: EXT_CLK_EDGE
        bits: 39..38
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          External clock input edge:
          00 = Rising edge.
          01 = Falling edge.
          10 = Both rising and falling edge.
          11 = Reserved.

      - name: --
        bits: 37..32
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: PPS_INV
        bits: 31
        access: R/W
        reset: 0
        typical: 0
        description: |
          Invert PTP PPS.
          0 = Don't invert.
          1 = Invert.

      - name: PPS_EN
        bits: 30
        access: R/W
        reset: 0
        typical: 0
        description: Enable PTP PPS. (For output pin selection see GPIO_BIT_CFG.)

      - name: --
        bits: 29..26
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: CKOUT_INV
        bits: 25
        access: R/W
        reset: 0
        typical: 0
        description: |
          Invert PTP clock out.
          0 = Don't invert.
          1 = Invert.

      - name: CKOUT_EN
        bits: 24
        access: R/W
        reset: 0
        typical: 0
        description: Enable PTP clock out. (For output pin selection see GPIO_BIT_CFG.)

      - name: EVCNT_IN
        bits: 23..18
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Source for event counter input:
          0x00-0x13 = GPIOn, where n is EVCNT_IN<4:0>.
          0x14-0x1F = Reserved.
          0x20-0x27 = QLMn_REF_CLK, where n is EVCNT_IN<3:0>.
                      Note that OCI Reference Clocks cannot be selected.
          0x28-0x3F = Reserved.

      - name: EVCNT_EDGE
        bits: 17
        access: R/W
        reset: 0
        typical: 0
        description: |
          Event counter input edge: 0 = falling edge, 1 = rising edge

      - name: EVCNT_EN
        bits: 16
        access: R/W
        reset: 0
        typical: 0
        description: Enable event counter.

      - name: TSTMP_IN
        bits: 15..10
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Source for timestamp input:
          0x00-0x13 = GPIOn, where n is TSTMP_IN<4:0>.
          0x14-0x1F = Reserved.
          0x20-0x27 = QLMn_REF_CLK, where n is TSTMP_IN<3:0>.
          0x28-0x3F = Reserved.

      - name: TSTMP_EDGE
        bits: 9
        access: R/W
        reset: 0
        typical: 0
        description: |
          External timestamp input edge: 0 = falling edge, 1 = rising edge

      - name: TSTMP_EN
        bits: 8
        access: R/W
        reset: 0
        typical: 0
        description: Enable external timestamp.

      - name: EXT_CLK_IN
        bits: 7..2
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Source for external clock when EXT_CLK_EN is set:
          0x00-0x13 = GPIOn, where n is EXT_CLK_IN<4:0>.
          0x14-0x1F = Reserved.
          0x20-0x27 = QLMn_REF_CLK, where n is EXT_CLK_IN<3:0>.
          0x28-0x3F = Reserved.

      - name: EXT_CLK_EN
        bits: 1
        access: R/W
        reset: 0
        typical: 0
        description: Use external clock for PTP clock.

      - name: PTP_EN
        bits: 0
        access: R/W
        reset: 0
        typical: 0
        description: Enable PTP module.


  - name: MIO_PTP_CLOCK_LO
    title: PTP Clock Low Register
    address: 0x1070000000F08
    bus: NCB
    description: |
      This register provides bits<31:0> of the PTP clock.  MIO_PTP_CLOCK_CFG[PTP_EN] needs to be
      enabled before writing this register.
    fields:
      - name: --
        bits: 63..32
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: FRNANOSEC
        bits: 31..0
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: |
          Fractions of nanoseconds. Bits<31:0> of the PTP clock.


  - name: MIO_PTP_CLOCK_HI
    title: PTP Clock High Register
    address: 0x1070000000F10
    bus: NCB
    description: |
      This register provides bits<95:32> of the PTP clock. Writes to MIO_PTP_CLOCK_HI also clear
      MIO_PTP_CLOCK_LO. To update all 96 bits, write MIO_PTP_CLOCK_HI followed by MIO_PTP_CLOCK_LO.
      MIO_PTP_CLOCK_CFG[PTP_EN] needs to be enabled before writing this register.
    fields:
      - name: NANOSEC
        bits: 63..0
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: |
          Clock value in nanoseconds. Bits<95:32> of the PTP clock.


  - name: MIO_PTP_CLOCK_COMP
    title: PTP Clock Compensator Register
    address: 0x1070000000F18
    bus: NCB
    description: |
      This register provides the compensation value the PTP clock. MIO_PTP_CLOCK_CFG[PTP_EN] needs
      to be enabled before writing this register.
    fields:
      - name: NANOSEC
        bits: 63..32
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Compensation value in nanoseconds.

      - name: FRNANOSEC
        bits: 31..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Fractions of nanoseconds.


  - name: MIO_PTP_TIMESTAMP
    title: PTP Timestamp Register
    address: 0x1070000000F20
    bus: NCB
    description: |
      This register contains the timestamp latched on MIO_PTP_CLOCK_CFG[TSTMP_EDGE] edge of
      MIO_PTP_CLOCK_CFG[TSTMP_IN].
    fields:
      - name: NANOSEC
        bits: 63..0
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: Timestamp in nanoseconds.


  - name: MIO_PTP_EVT_CNT
    title: PTP Event Counter Register
    address: 0x1070000000F28
    bus: NCB
    description: This register contains the PTP event counter.
    fields:
      - name: CNTR
        bits: 63..0
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: |
          Count nanoseconds. Writing to this register increments this register by the value of the
          write data. The register counts down by 1 for every MIO_PTP_CLOCK_CFG[EVCNT_EDGE] edge of
          MIO_PTP_CLOCK_CFG[EVCNT_IN]. When this register equals 0, an interrupt is generated.


  - name: MIO_PTP_CKOUT_THRESH_LO
    title: PTP Clock Out Low Register
    address: 0x1070000000F30
    bus: NCB
    description: This register contains the low bytes of the PTP clock out.
    fields:
      - name: --
        bits: 63..32
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: FRNANOSEC
        bits: 31..0
        access: R/W/H
        reset: all-ones
        typical: 0x0
        description: Fractions of nanoseconds.


  - name: MIO_PTP_CKOUT_THRESH_HI
    title: PTP Clock Out High Register
    address: 0x1070000000F38
    bus: NCB
    description: |
      This register contains the high bytes of the PTP clock out. Writes to MIO_PTP_CKOUT_THRESH_HI
      also clear MIO_PTP_CKOUT_THRESH_LO; to update all 96 bits, write MIO_PTP_CKOUT_THRESH_HI
      followed by MIO_PTP_CKOUT_THRESH_LO.
    fields:
      - name: NANOSEC
        bits: 63..0
        access: R/W/H
        reset: all-ones
        typical: 0x0
        description: Nanoseconds.


  - name: MIO_PTP_CKOUT_HI_INCR
    title: PTP Clock Out High Increment Register
    address: 0x1070000000F40
    bus: NCB
    description: This register contains the high bytes of the PTP clock out increment.
    fields:
      - name: NANOSEC
        bits: 63..32
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Nanoseconds.

      - name: FRNANOSEC
        bits: 31..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Fractions of nanoseconds.


  - name: MIO_PTP_CKOUT_LO_INCR
    title: PTP Clock Out Low Increment Register
    address: 0x1070000000F48
    bus: NCB
    description: This register contains the low bytes of the PTP clock out increment.
    attributes:
      dv_fc_scratch: "ALL"
    fields:
      - name: NANOSEC
        bits: 63..32
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Nanoseconds.

      - name: FRNANOSEC
        bits: 31..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Fractions of nanoseconds.


  - name: MIO_PTP_PPS_THRESH_LO
    title: PTP PPS Low Register
    address: 0x1070000000F50
    bus: NCB
    description: This register contains the low bytes of the PTP PPS.
    fields:
      - name: --
        bits: 63..32
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: FRNANOSEC
        bits: 31..0
        access: R/W
        reset: all-ones
        typical: 0x0
        description: Fractions of nanoseconds.


  - name: MIO_PTP_PPS_THRESH_HI
    title: PTP PPS High Register
    address: 0x1070000000F58
    bus: NCB
    description: |
      This register contains the high bytes of the PTP PPS. Writes to MIO_PTP_PPS_THRESH_HI also
      clear MIO_PTP_PPS_THRESH_LO; to update all 96 bits write MIO_PTP_PPS_THRESH_HI followed by
      MIO_PTP_PPS_THRESH_LO.
    fields:
      - name: NANOSEC
        bits: 63..0
        access: R/W
        reset: all-ones
        typical: 0x0
        description: Nanoseconds.


  - name: MIO_PTP_PPS_HI_INCR
    title: PTP PPS High Increment Register
    address: 0x1070000000F60
    bus: NCB
    description: This register contains the high bytes of the PTP PPS increment.
    fields:
      - name: NANOSEC
        bits: 63..32
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Nanoseconds.

      - name: FRNANOSEC
        bits: 31..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Fractions of nanoseconds.


  - name: MIO_PTP_PPS_LO_INCR
    title: PTP PPS Low Increment Register
    address: 0x1070000000F68
    bus: NCB
    description: This register contains the low bytes of the PTP PPS increment.
    fields:
      - name: NANOSEC
        bits: 63..32
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Nanoseconds.

      - name: FRNANOSEC
        bits: 31..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Fractions of nanoseconds.


  - name: MIO_PTP_EVT_INT
    title: PTP Event Interrupt Register
    address: 0x1070000000F70
    bus: NCB
    description: This register contains the PTP event interrupt.
    fields:
      - name: --
        bits: 63..1
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: EVT_INT
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          PTP event observed. Throws MIO_PTP_INTSN_E::MIO_PTP_EVT_INT.


  - name: MIO_PTP_DPLL_INCR
    title: PTP Digital PLL Increment Register
    address: 0x1070000000F80
    bus: NCB
    description: This register contains the Digital PLL increment. Zero disables the digital PLL.
    fields:
      - name: NANOSEC
        bits: 63..32
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Nanoseconds.

      - name: FRNANOSEC
        bits: 31..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Fractions of nanoseconds.


  - name: MIO_PTP_DPLL_ERR_THRESH
    title: PTP Digital PLL Error Threshold Register
    address: 0x1070000000F88
    bus: NCB
    description: This register configures the Digital PLL error interrupt.
    fields:
      - name: MAX
        bits: 63..32
        access: R/W
        reset: all-ones
        typical: --
        description: Highest acceptable value of MIO_PTP_DPLL_ERR_INT[N_SCLK] without asserting DPLL_INT interrupt.

      - name: MIN
        bits: 31..0
        access: R/W
        reset: 0x0
        typical: --
        description: Lowest acceptable value of MIO_PTP_DPLL_ERR_INT[N_SCLK] without asserting DPLL_INT interrupt.


  - name: MIO_PTP_DPLL_ERR_INT
    title: PTP Digital PLL Error Interrupt Register
    address: 0x1070000000F90
    bus: NCB
    description: This register contains the Digital PLL error event interrupt.
    fields:
      - name: N_SCLK
        bits: 63..32
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: Latest number of Digital PLL coprocessor clocks in one compensation period.

      - name: --
        bits: 31..1
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: DPLL_INT
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Digital PLL error. Throws MIO_PTP_INTSN_E::MIO_PTP_DPLL_ERR_INT.



