# -*- csr3 -*-
# You must run "csr3 rtl" after editing this file!
---
name: PKO
registers:
  - name: PKO_REG_FLAGS
    address: 0x1180050000000
    bus: RSL
    internal: |
      When set, ENA_PKO enables the PKO picker and places the PKO in normal operation. When set,
      ENA_DWB enables the use of DontWriteBacks during the buffer freeing operations. When not set,
      STORE_BE inverts bits[2:0] of the STORE0 byte write address. When set, RESET causes a 4-cycle
      reset pulse to the entire box.
    fields:
      - name: --
        bits: 63..9
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: DIS_PERF3
        bits: 8
        access: R/W
        reset: 0
        typical: 0
        description: Set to disable inactive queue QOS skipping

      - name: DIS_PERF2
        bits: 7
        access: R/W
        reset: 0
        typical: 0
        description: Set to disable inactive queue skipping

      - name: --
        bits: 6..4
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: RESET
        bits: 3
        access: RAZ
        reset: 0
        typical: 0
        description: Reset oneshot pulse

      - name: STORE_BE
        bits: 2
        access: R/W
        reset: 0
        typical: 0
        description: Force STORE0 byte write address to big endian

      - name: ENA_DWB
        bits: 1
        access: R/W
        reset: 0
        typical: 0
        description: Set to enable DontWriteBacks

      - name: ENA_PKO
        bits: 0
        access: R/W
        reset: 0
        typical: 0
        description: Set to enable the PKO picker


  - name: PKO_REG_READ_IDX
    address: 0x1180050000008
    bus: RSL
    internal: |
      Provides the read index during a CSR read operation to any of the CSRs that are physically
      stored as memories. The names of these CSRs begin with the prefix "PKO_MEM_". IDX[7:0] is the
      read index. INC[7:0] is an increment that is added to IDX[7:0] after any CSR read. The
      intended use is to initially write this CSR such that IDX=0 and INC=1. Then, the entire
      contents of a CSR memory can be read with consecutive CSR read commands.
    fields:
      - name: --
        bits: 63..16
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: INC
        bits: 15..8
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Increment to add to current index for next index

      - name: IDX
        bits: 7..0
        access: R/W
        reset: 0x0
        typical: 0x0
        attributes:
          exempt_keyword: "True"
        description: Index to use for next memory CSR read


  - name: PKO_REG_CMD_BUF
    address: 0x1180050000010
    bus: RSL
    internal: |
      Sets the command buffer parameters
      The size of the command buffer segments is measured in uint64s.  The pool specifies (1 of 8
      free lists to be used when freeing command buffer segments.
    fields:
      - name: --
        bits: 63..23
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: POOL
        bits: 22..20
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Free list used to free command buffer segments

      - name: --
        bits: 19..13
        access: R/W
        reset: 0x0
        typical: 0x0
        description: MBZ

      - name: SIZE
        bits: 12..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Number of uint64s per command buffer segment


  - name: PKO_REG_GMX_PORT_MODE
    address: 0x1180050000018
    bus: RSL
    internal: |
      The system has a total of 4 + 4 + 4 + 4 + 1 ports and 4 + 4 + 1 + 1 + 1 engines (GMX0 + GMX1 +
      PCI + LOOP + AGL).
      This CSR sets the number of GMX0/GMX1 ports and amount of local storage per engine.
      It has no effect on the number of ports or amount of local storage per engine for PCI, LOOP
      and AGL.
      When all GMX ports are used (MODE0=2), each GMX engine has 2.5kB of local storage.  Increasing
      the value of MODEn by 1 decreases the number of GMX ports by a power of 2 and increases the
      local storage per PKO GMX engine by a power of 2.  If one of the modes is 5, then only one of
      interfaces GM0 or GM1 is present and the storage per engine of the existing interface is
      doubled.  Modes 0 and 1 are illegal and, if selected, are treated as mode 2.
      MODE[n] GM[n] PCI   LOOP  AGL   GM[n]                      PCI            LOOP           AGL
              ports ports ports ports storage/engine             storage/engine storage/engine
      storage/engine
      0       4     4     4     1     ( 2.5kB << (MODE[1-n]==5)) 2.5kB          2.5kB          2.5kB
      1       4     4     4     1     ( 2.5kB << (MODE[1-n]==5)) 2.5kB          2.5kB          2.5kB
      2       4     4     4     1     ( 2.5kB << (MODE[1-n]==5)) 2.5kB          2.5kB          2.5kB
      3       2     4     4     1     ( 5.0kB << (MODE[1-n]==5)) 2.5kB          2.5kB          2.5kB
      4       1     4     4     1     (10.0kB << (MODE[1-n]==5)) 2.5kB          2.5kB          2.5kB
      5       0     4     4     1     (   0kB                  ) 2.5kB          2.5kB          2.5kB
      where 0 <= n <= 1
    fields:
      - name: --
        bits: 63..6
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: MODE1
        bits: 5..3
        access: R/W
        reset: 0x0
        typical: 0x0
        description: "# of GM1 ports = 16 >> MODE0, 0 <= MODE0 <= 4"

      - name: MODE0
        bits: 2..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: "# of GM0 ports = 16 >> MODE0, 0 <= MODE0 <= 4"


  - name: PKO_REG_QUEUE_MODE
    address: 0x1180050000048
    bus: RSL
    internal: |
      Sets the number of queues and amount of local storage per queue
      The system has a total of 256 queues and (256*8) words of local command storage.  This CSR
      sets the number of queues that are used.  Increasing the value of MODE by 1 decreases the
      number of queues by a power of 2 and increases the local storage per queue by a power of 2.
      MODEn queues storage/queue
      0     256     64B ( 8 words)
      1     128    128B (16 words)
      2      64    256B (32 words)
    fields:
      - name: --
        bits: 63..2
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: MODE
        bits: 1..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: "# of queues = 256 >> MODE, 0 <= MODE <=2"


  - name: PKO_REG_ENGINE_INFLIGHT
    address: 0x1180050000050
    bus: RSL
    internal: |
      Sets the maximum number of inflight packets, per engine.  Values greater than 4 are illegal.
      Setting an engine's value to 0 effectively stops the engine.
    fields:
      - name: --
        bits: 63..56
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: ENGINE13
        bits: 55..52
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Reserved.

      - name: ENGINE12
        bits: 51..48
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Reserved.

      - name: ENGINE11
        bits: 47..44
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Reserved.

      - name: ENGINE10
        bits: 43..40
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine10

      - name: ENGINE9
        bits: 39..36
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine9

      - name: ENGINE8
        bits: 35..32
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine8

      - name: ENGINE7
        bits: 31..28
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine7

      - name: ENGINE6
        bits: 27..24
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine6

      - name: ENGINE5
        bits: 23..20
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine5

      - name: ENGINE4
        bits: 19..16
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine4

      - name: ENGINE3
        bits: 15..12
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine3

      - name: ENGINE2
        bits: 11..8
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine2

      - name: ENGINE1
        bits: 7..4
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine1

      - name: ENGINE0
        bits: 3..0
        access: R/W
        reset: 0x4
        typical: 0x4
        description: Maximum number of inflight packets for engine0


  - name: PKO_REG_ENGINE_THRESH
    address: 0x1180050000058
    bus: RSL
    internal: |
      When not enabled, packet data may be sent as soon as it is written into PKO's internal
      buffers.
      When enabled and the packet fits entirely in the PKO's internal buffer, none of the packet
      data will be sent until all of it has been written into the PKO's internal buffer.  Note that
      a packet is considered to fit entirely only if the packet's size is <= BUFFER_SIZE-8.  When
      enabled and the packet does not fit entirely in the PKO's internal buffer, none of the packet
      data will be sent until at least BUFFER_SIZE-256 bytes of the packet have been written into
      the PKO's internal buffer (note that BUFFER_SIZE is a function of PKO_REG_GMX_PORT_MODE above)
    fields:
      - name: --
        bits: 63..14
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: MASK
        bits: 13..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Mask[n]=0 disables packet send threshold for engine n
          Mask[n]=1 enables  packet send threshold for engine n
          Bits <13:11> are unused


  - name: PKO_REG_TIMESTAMP
    address: 0x1180050000060
    bus: RSL
    internal: None.
    fields:
      - name: --
        bits: 63..4
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: WQE_WORD
        bits: 3..0
        access: R/W
        reset: 0x2
        typical: 0x2
        description: |
          Specifies the 8-byte word in the WQE to which a PTP
          timestamp is written.  Values 0 and 1 are illegal.


  - name: PKO_REG_BIST_RESULT
    address: 0x1180050000080
    bus: RSL
    internal: |
      Access to the internal BiST results
      Each bit is the BiST result of an individual memory (per bit, 0=pass and 1=fail).
    fields:
      - name: --
        bits: 63..30
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: CSR
        bits: 29
        access: RO
        reset: X
        typical: 0
        description: BiST result of CSR      memories (0=pass, !0=fail)

      - name: IOB
        bits: 28
        access: RO
        reset: X
        typical: 0
        description: BiST result of IOB      memories (0=pass, !0=fail)

      - name: OUT_DAT
        bits: 27
        access: RO
        reset: X
        typical: 0
        description: BiST result of OUT_DAT  memories (0=pass, !0=fail)

      - name: OUT_CTL
        bits: 26
        access: RO
        reset: X
        typical: 0
        description: BiST result of OUT_CTL  memories (0=pass, !0=fail)

      - name: OUT_STA
        bits: 25
        access: RO
        reset: X
        typical: 0
        description: BiST result of OUT_STA  memories (0=pass, !0=fail)

      - name: OUT_WIF
        bits: 24
        access: RO
        reset: X
        typical: 0
        description: BiST result of OUT_WIF  memories (0=pass, !0=fail)

      - name: PRT_CHK
        bits: 23..21
        access: RO
        reset: X
        typical: 0x0
        description: BiST result of PRT_CHK  memories (0=pass, !0=fail)

      - name: PRT_NXT
        bits: 20
        access: RO
        reset: X
        typical: 0
        description: BiST result of PRT_NXT  memories (0=pass, !0=fail)

      - name: PRT_PSB
        bits: 19..12
        access: RO
        reset: X
        typical: 0x0
        description: BiST result of PRT_PSB  memories (0=pass, !0=fail)

      - name: NCB_INB
        bits: 11
        access: RO
        reset: X
        typical: 0
        description: BiST result of NCB_INB  memories (0=pass, !0=fail)

      - name: PRT_QCB
        bits: 10
        access: RO
        reset: X
        typical: 0
        description: BiST result of PRT_QCB  memories (0=pass, !0=fail)

      - name: PRT_QSB
        bits: 9..8
        access: RO
        reset: X
        typical: 0x0
        description: BiST result of PRT_QSB  memories (0=pass, !0=fail)

      - name: PRT_CTL
        bits: 7..6
        access: RO
        reset: X
        typical: 0x0
        description: BiST result of PRT_CTL  memories (0=pass, !0=fail)

      - name: DAT_DAT
        bits: 5..4
        access: RO
        reset: X
        typical: 0x0
        description: BiST result of DAT_DAT  memories (0=pass, !0=fail)

      - name: DAT_PTR
        bits: 3..0
        access: RO
        reset: X
        typical: 0x0
        description: BiST result of DAT_PTR  memories (0=pass, !0=fail)


  - name: PKO_REG_ERROR
    address: 0x1180050000088
    bus: RSL
    fields:
      - name: --
        bits: 63..3
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: CURRZERO
        bits: 2
        access: R/W1C/H
        reset: 0
        typical: 0
        description: A packet data pointer has size=0

      - name: DOORBELL
        bits: 1
        access: R/W1C/H
        reset: 0
        typical: 0
        description: A doorbell count has overflowed

      - name: PARITY
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: Read parity error at port data buffer


  - name: PKO_REG_INT_MASK
    address: 0x1180050000090
    bus: RSL
    internal: When a mask bit is set, the corresponding interrupt is enabled.
    fields:
      - name: --
        bits: 63..3
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: CURRZERO
        bits: 2
        access: R/W/H
        reset: 0
        typical: 0
        description: Bit mask corresponding to PKO_REG_ERROR[2] above

      - name: DOORBELL
        bits: 1
        access: R/W/H
        reset: 0
        typical: 0
        description: Bit mask corresponding to PKO_REG_ERROR[1] above

      - name: PARITY
        bits: 0
        access: R/W/H
        reset: 0
        typical: 0
        description: Bit mask corresponding to PKO_REG_ERROR[0] above


  - name: PKO_REG_DEBUG0
    address: 0x1180050000098
    bus: RSL
    fields:
      - name: ASSERTS
        bits: 63..0
        access: RO
        reset: 0x0
        typical: 0x0
        description: Various assertion checks


  - name: PKO_REG_DEBUG1
    address: 0x11800500000A0
    bus: RSL
    fields:
      - name: ASSERTS
        bits: 63..0
        access: RO
        reset: 0x0
        typical: 0x0
        description: Various assertion checks


  - name: PKO_REG_DEBUG2
    address: 0x11800500000A8
    bus: RSL
    fields:
      - name: ASSERTS
        bits: 63..0
        access: RO
        reset: 0x0
        typical: 0x0
        description: Various assertion checks


  - name: PKO_REG_DEBUG3
    address: 0x11800500000B0
    bus: RSL
    fields:
      - name: ASSERTS
        bits: 63..0
        access: RO
        reset: 0x0
        typical: 0x0
        description: Various assertion checks


  - name: PKO_REG_QUEUE_PTRS1
    address: 0x1180050000100
    bus: RSL
    internal: |
      This CSR is used with PKO_MEM_QUEUE_PTRS and PKO_MEM_QUEUE_QOS to allow access to queues
      128-255 and to allow up mapping of up to 16 queues per port. When programming queues 128-255,
      the programming sequence must first write PKO_REG_QUEUE_PTRS1 and then write
      PKO_MEM_QUEUE_PTRS or PKO_MEM_QUEUE_QOS for each queue.
      See the descriptions of PKO_MEM_QUEUE_PTRS and PKO_MEM_QUEUE_QOS for further explanation of
      queue programming.
    fields:
      - name: --
        bits: 63..2
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: IDX3
        bits: 1
        access: R/W/H
        reset: 0
        typical: 0
        description: bit<3> of Index (distance from head) in the queue

      - name: QID7
        bits: 0
        access: R/W/H
        reset: 0
        typical: 0
        description: bit<7> of Queue ID


  - name: PKO_REG_QUEUE_PREEMPT
    address: 0x1180050000108
    bus: RSL
    internal: |
      Per QID, setting both PREEMPTER=1 and PREEMPTEE=1 is illegal and sets only PREEMPTER=1.
      This CSR is used with PKO_MEM_QUEUE_PTRS and PKO_REG_QUEUE_PTRS1.  When programming queues,
      the programming sequence must first write PKO_REG_QUEUE_PREEMPT, then PKO_REG_QUEUE_PTRS1 and
      then PKO_MEM_QUEUE_PTRS for each queue.  Preemption is supported only on queues that are
      ultimately mapped to engines 0-7.  It is illegal to set preemptee or preempter for a queue
      that is ultimately mapped to engines 8-11.
      Also, PKO_REG_ENGINE_INFLIGHT must be at least 2 for any engine on which preemption is
      enabled.
      See the descriptions of PKO_MEM_QUEUE_PTRS for further explanation of queue programming.
    fields:
      - name: --
        bits: 63..2
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PREEMPTEE
        bits: 1
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          Allow this QID to be preempted.
          0=cannot be preempted, 1=can be preempted

      - name: PREEMPTER
        bits: 0
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          Preempts the servicing of packet on PID to
          allow this QID immediate servicing.  0=do not cause
          preemption, 1=cause preemption.  Per PID, at most
          1 QID can have this bit set.


  - name: PKO_REG_PREEMPT
    address: 0x1180050000110
    bus: RSL
    attributes:
      dv_fc_scratch: "ALL"
    fields:
      - name: --
        bits: 63..16
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: MIN_SIZE
        bits: 15..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Threshhold for packet preemption, measured in bytes.
          Only packets which have at least MIN_SIZE bytes
          remaining to be read can be preempted.


  - name: PKO_MEM_QUEUE_PTRS
    address: 0x1180050001000
    bus: RSL
    internal: |
      Sets the queue to port mapping and the initial command buffer pointer, per queue Each queue
      may map to at most one port. No more than 16 queues may map to a port. The set of queues that
      is mapped to a port must be a contiguous array of queues. The port to which queue QID is
      mapped is port PID. The index of queue QID in port PID's queue list is IDX. The last queue in
      port PID's queue array must have its TAIL bit set. Unused queues must be mapped to port
      63. STATIC_Q marks queue QID as having static priority. STATIC_P marks the port PID to which
      QID is mapped as having at least one queue with static priority. If any QID that maps to PID
      has static priority, then all QID that map to PID must have STATIC_P set. Queues marked as
      static priority must be contiguous and begin at IDX 0. The last queue that is marked as having
      static priority must have its S_TAIL bit set.
      This CSR is a memory of 256 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.  A read of any entry that has not
      been previously written is illegal and will result in unpredictable CSR read data.
    fields:
      - name: S_TAIL
        bits: 63
        access: R/W/H
        reset: X
        typical: 0
        description: Set if this QID is the tail of the static queues

      - name: STATIC_P
        bits: 62
        access: R/W/H
        reset: X
        typical: 0
        description: Set if any QID in this PID has static priority

      - name: STATIC_Q
        bits: 61
        access: R/W/H
        reset: X
        typical: 0
        description: Set if this QID has static priority

      - name: QOS_MASK
        bits: 60..53
        access: R/W/H
        reset: X
        typical: 0x0
        description: Mask to control priority across 8 QOS rounds

      - name: BUF_PTR
        bits: 52..17
        access: R/W/H
        reset: X
        typical: 0x0
        description: |
          Command buffer pointer, <23:17> MBZ

      - name: TAIL
        bits: 16
        access: R/W/H
        reset: X
        typical: 0
        description: Set if this QID is the tail of the queue array

      - name: IDX
        bits: 15..13
        access: WO
        reset: X
        typical: 0x0
        attributes:
          exempt_keyword: "True"
        description: |
          Index[2:0] (distance from head) in the queue array

      - name: PID
        bits: 12..7
        access: WO
        reset: X
        typical: 0x0
        description: Port ID to which this queue is mapped

      - name: QID
        bits: 6..0
        access: R/W/H
        reset: X
        typical: 0x0
        description: |
          Queue ID[6:0]


  - name: PKO_MEM_QUEUE_QOS
    address: 0x1180050001008
    bus: RSL
    internal: |
      Sets the QOS mask, per queue. These QOS_MASK bits are logically and physically the same
      QOS_MASK bits in PKO_MEM_QUEUE_PTRS. This CSR address allows the QOS_MASK bits to be written
      during PKO operation without affecting any other queue state. The port to which queue QID is
      mapped is port PID. Note that the queue to port mapping must be the same as was previously
      programmed via the PKO_MEM_QUEUE_PTRS CSR.
      This CSR is a memory of 256 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.  A read of any entry that has not
      been previously written is illegal and will result in unpredictable CSR read data.
    fields:
      - name: --
        bits: 63..61
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: QOS_MASK
        bits: 60..53
        access: R/W/H
        reset: X
        typical: 0x0
        description: Mask to control priority across 8 QOS rounds

      - name: --
        bits: 52..13
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PID
        bits: 12..7
        access: WO
        reset: X
        typical: 0x0
        description: Port ID to which this queue is mapped

      - name: QID
        bits: 6..0
        access: R/W/H
        reset: X
        typical: 0x0
        description: Queue ID


  - name: PKO_MEM_PORT_PTRS
    address: 0x1180050001010
    bus: RSL
    internal: |
      Sets the port to engine mapping, per port. Ports marked as static priority need not be
      contiguous, but they must be the lowest numbered PIDs mapped to this EID and must have
      QOS_MASK=0xff. If EID==8 or EID==9, then PID[1:0] is used to direct the packet to the correct
      port on that interface.
      EID==15 can be used for unused PKO-internal ports.
      BP_PORT==63 means that the PKO-internal port is not backpressured.
      BP_PORTs are assumed to belong to an interface as follows:
        36 <= BP_PORT < 40 -> loopback   interface
        32 <= BP_PORT < 36 -> PCIe       interface
        0  <= BP_PORT < 16 -> GMX        interface 0
      The reset configuration is the following:
        PID EID(ext port) BP_PORT QOS_MASK STATIC_P
        -------------------------------------------
         0   0( 0)             0     0xff        0
         1   1( 1)             1     0xff        0
         2   2( 2)             2     0xff        0
         3   3( 3)             3     0xff        0
         4   0( 0)             4     0xff        0
         5   1( 1)             5     0xff        0
         6   2( 2)             6     0xff        0
         7   3( 3)             7     0xff        0
         8   0( 0)             8     0xff        0
         9   1( 1)             9     0xff        0
        10   2( 2)            10     0xff        0
        11   3( 3)            11     0xff        0
        12   0( 0)            12     0xff        0
        13   1( 1)            13     0xff        0
        14   2( 2)            14     0xff        0
        15   3( 3)            15     0xff        0
        -------------------------------------------
        16   4(16)            16     0xff        0
        17   5(17)            17     0xff        0
        18   6(18)            18     0xff        0
        19   7(19)            19     0xff        0
        20   4(16)             -     0xff        0
        21   5(17)             -     0xff        0
        22   6(18)             -     0xff        0
        23   7(19)             -     0xff        0
        24   4(16)             -     0xff        0
        25   5(17)             -     0xff        0
        26   6(18)             -     0xff        0
        27   7(19)             -     0xff        0
        28   4(16)             -     0xff        0
        29   5(17)             -     0xff        0
        30   6(18)             -     0xff        0
        31   7(19)             -     0xff        0
        -------------------------------------------
        32   8(32)            32     0xff        0
        33   8(33)            33     0xff        0
        34   8(34)            34     0xff        0
        35   8(35)            35     0xff        0
        -------------------------------------------
        36   9(36)            36     0xff        0
        37   9(37)            37     0xff        0
        38   9(38)            38     0xff        0
        39   9(39)            39     0xff        0
        -------------------------------------------
        40  10(24)             -     0xff        0
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.  A read of any entry that has not
      been previously written is illegal and will result in unpredictable CSR read data.
    fields:
      - name: --
        bits: 63..62
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: STATIC_P
        bits: 61
        access: R/W/H
        reset: X
        typical: 0
        description: Set if this PID has static priority

      - name: QOS_MASK
        bits: 60..53
        access: R/W/H
        reset: X
        typical: 0x0
        description: Mask to control priority across 8 QOS rounds

      - name: --
        bits: 52..16
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: BP_PORT
        bits: 15..10
        access: R/W/H
        reset: X
        typical: 0x0
        description: |
          PID listens to BP_PORT for per-packet backpressure
          Legitimate BP_PORTs: 0-15, 32-39, 63 (63 means no BP)

      - name: EID
        bits: 9..6
        access: R/W/H
        reset: X
        typical: 0x0
        description: |
          Engine ID to which this port is mapped
          Legal EIDs: 0-10, 15 (15 only if port not used)

      - name: PID
        bits: 5..0
        access: R/W/H
        reset: X
        typical: 0x0
        description: |
          Port ID[5:0]


  - name: PKO_MEM_PORT_QOS
    address: 0x1180050001018
    bus: RSL
    internal: |
      Sets the QOS mask, per port. These QOS_MASK bits are logically and physically the same
      QOS_MASK bits in PKO_MEM_PORT_PTRS. This CSR address allows the QOS_MASK bits to be written
      during PKO operation without affecting any other port state. The engine to which port PID is
      mapped is engine EID. Note that the port to engine mapping must be the same as was previously
      programmed via the PKO_MEM_PORT_PTRS CSR.
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.  A read of any entry that has not
      been previously written is illegal and will result in unpredictable CSR read data.
    fields:
      - name: --
        bits: 63..61
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: QOS_MASK
        bits: 60..53
        access: R/W/H
        reset: X
        typical: 0x0
        description: Mask to control priority across 8 QOS rounds

      - name: --
        bits: 52..10
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: EID
        bits: 9..6
        access: R/W/H
        reset: X
        typical: 0x0
        description: |
          Engine ID to which this port is mapped
          Legal EIDs: 0-10

      - name: PID
        bits: 5..0
        access: R/W/H
        reset: X
        typical: 0x0
        description: |
          Port ID[5:0]


  - name: PKO_MEM_PORT_RATE0
    address: 0x1180050001020
    bus: RSL
    internal: |
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed. A read of any entry that has not
      been previously written is illegal and will result in unpredictable CSR read data.
    fields:
      - name: --
        bits: 63..51
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: RATE_WORD
        bits: 50..32
        access: R/W/H
        reset: X
        typical: 0x0
        description: Rate limiting adder per 8 byte

      - name: RATE_PKT
        bits: 31..8
        access: R/W/H
        reset: X
        typical: 0x0
        description: Rate limiting adder per packet

      - name: --
        bits: 7..6
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PID
        bits: 5..0
        access: R/W/H
        reset: X
        typical: 0x0
        description: |
          Port ID[5:0]


  - name: PKO_MEM_PORT_RATE1
    address: 0x1180050001028
    bus: RSL
    internal: |
      Writing PKO_MEM_PORT_RATE1[PID,RATE_LIM] has the side effect of setting the corresponding
      accumulator to zero.
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.  A read of any entry that has not
      been previously written is illegal and will result in unpredictable CSR read data.
    fields:
      - name: --
        bits: 63..32
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: RATE_LIM
        bits: 31..8
        access: R/W/H
        reset: X
        typical: 0x0
        description: Rate limiting accumulator limit

      - name: --
        bits: 7..6
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PID
        bits: 5..0
        access: R/W/H
        reset: X
        typical: 0x0
        description: |
          Port ID[5:0]


  - name: PKO_MEM_COUNT0
    address: 0x1180050001080
    bus: RSL
    internal: |
      Total number of packets seen by PKO, per port
      A write to this address will clear the entry whose index is specified as COUNT[5:0].
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.  A read of any entry that has not
      been previously written is illegal and will result in unpredictable CSR read data.
    fields:
      - name: --
        bits: 63..32
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: COUNT
        bits: 31..0
        access: R/W1C/H
        reset: X
        typical: 0x0
        description: Total number of packets seen by PKO


  - name: PKO_MEM_COUNT1
    address: 0x1180050001088
    bus: RSL
    internal: |
      Total number of bytes seen by PKO, per port
      A write to this address will clear the entry whose index is specified as COUNT[5:0].
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.  A read of any entry that has not
      been previously written is illegal and will result in unpredictable CSR read data.
    fields:
      - name: --
        bits: 63..48
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: COUNT
        bits: 47..0
        access: R/W1C/H
        reset: X
        typical: 0x0
        description: Total number of bytes seen by PKO


  - name: PKO_MEM_DEBUG0
    address: 0x1180050001100
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko_prt_psb.cmnd[63:0]
      This CSR is a memory of 11 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: FAU
        bits: 63..36
        access: RO/H
        reset: X
        typical: 0x0
        description: Fetch and add command words

      - name: CMD
        bits: 35..22
        access: RO/H
        reset: X
        typical: 0x0
        description: Command word

      - name: SEGS
        bits: 21..16
        access: RO/H
        reset: X
        typical: 0x0
        description: Number of segments/gather size

      - name: SIZE
        bits: 15..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Packet length in bytes


  - name: PKO_MEM_DEBUG1
    address: 0x1180050001108
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko_prt_psb.curr[63:0]
      This CSR is a memory of 11 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: I
        bits: 63
        access: RO/H
        reset: X
        typical: 0
        description: '"I"  value used for free operation'

      - name: BACK
        bits: 62..59
        access: RO/H
        reset: X
        typical: 0x0
        description: Back value used for free operation

      - name: POOL
        bits: 58..56
        access: RO/H
        reset: X
        typical: 0x0
        description: Pool value used for free operation

      - name: SIZE
        bits: 55..40
        access: RO/H
        reset: X
        typical: 0x0
        description: Size in bytes

      - name: PTR
        bits: 39..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Data pointer


  - name: PKO_MEM_DEBUG2
    address: 0x1180050001110
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko_prt_psb.head[63:0]
      This CSR is a memory of 11 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: I
        bits: 63
        access: RO/H
        reset: X
        typical: 0
        description: '"I"  value used for free operation'

      - name: BACK
        bits: 62..59
        access: RO/H
        reset: X
        typical: 0x0
        description: Back value used for free operation

      - name: POOL
        bits: 58..56
        access: RO/H
        reset: X
        typical: 0x0
        description: Pool value used for free operation

      - name: SIZE
        bits: 55..40
        access: RO/H
        reset: X
        typical: 0x0
        description: Size in bytes

      - name: PTR
        bits: 39..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Data pointer


  - name: PKO_MEM_DEBUG3
    address: 0x1180050001118
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko_prt_psb.resp[63:0]
      This CSR is a memory of 11 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: DATA
        bits: 63..0
        access: RO/H
        reset: X
        typical: 0x0
        description: WorkQ data or Store0 pointer


  - name: PKO_MEM_DEBUG4
    address: 0x1180050001120
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko_prt_psb.state[63:0]
      This CSR is a memory of 11 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: CURR_SIZ
        bits: 63..56
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: CURR_OFF
        bits: 55..40
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: CMND_SEGS
        bits: 39..34
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: CMND_SIZ
        bits: 33..18
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: CMND_OFF
        bits: 17..12
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: UID
        bits: 11..10
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: DREAD_SOP
        bits: 9
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: INIT_DWRITE
        bits: 8
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: CHK_ONCE
        bits: 7
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: CHK_MODE
        bits: 6
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: WAIT
        bits: 5
        access: RO/H
        reset: X
        typical: 0
        attributes:
          exempt_keyword: "True"
        description: Internal state

      - name: MINOR
        bits: 4..3
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: MAJOR
        bits: 2..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state


  - name: PKO_MEM_DEBUG5
    address: 0x1180050001128
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko_prt_psb.state[127:64]
      This CSR is a memory of 11 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: --
        bits: 63..56
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PTP
        bits: 55
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: MAJOR_3
        bits: 54
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: NXT_INFLT
        bits: 53..48
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: CURR_PTR
        bits: 47..8
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: CURR_SIZ
        bits: 7..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state


  - name: PKO_MEM_DEBUG6
    address: 0x1180050001130
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko_prt_psb.port[63:0]
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: --
        bits: 63..37
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: QID_OFFRES
        bits: 36..33
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: QID_OFFTHS
        bits: 32..29
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: PREEMPTER
        bits: 28
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: PREEMPTEE
        bits: 27
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: PREEMPTED
        bits: 26
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: ACTIVE
        bits: 25
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: STATICB
        bits: 24
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: QOS
        bits: 23..21
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: QCB_RIDX
        bits: 20..16
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: QID_OFFMAX
        bits: 15..12
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: QID_OFF
        bits: 11..8
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: QID_BASE
        bits: 7..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state


  - name: PKO_MEM_DEBUG7
    address: 0x1180050001138
    bus: RSL
    internal: |
      Internal per-queue state intended for debug use only pko_prt_qsb.state[63:0]
      This CSR is a memory of 256 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: QOS
        bits: 63..59
        access: RO/H
        reset: X
        typical: 0x0
        description: QOS mask to enable the queue when set

      - name: TAIL
        bits: 58
        access: RO/H
        reset: X
        typical: 0
        description: This queue is the last (tail) in the queue array

      - name: BUF_SIZ
        bits: 57..45
        access: RO/H
        reset: X
        typical: 0x0
        description: Command buffer remaining size in words

      - name: BUF_PTR
        bits: 44..12
        access: RO/H
        reset: X
        typical: 0x0
        description: Command word pointer

      - name: QCB_WIDX
        bits: 11..6
        access: RO/H
        reset: X
        typical: 0x0
        description: Buffer write index for QCB

      - name: QCB_RIDX
        bits: 5..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Buffer read  index for QCB


  - name: PKO_MEM_DEBUG8
    address: 0x1180050001140
    bus: RSL
    internal: |
      Internal per-queue state intended for debug use only pko_prt_qsb.state[91:64]
      This CSR is a memory of 256 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: --
        bits: 63..42
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: QID_QQOS
        bits: 41..34
        access: RO/H
        reset: --
        typical: --
        description: QOS_MASK

      - name: --
        bits: 33
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: QID_IDX
        bits: 32..29
        access: RO/H
        reset: --
        typical: --
        description: IDX

      - name: PREEMPTER
        bits: 28
        access: RO/H
        reset: X
        typical: 0
        description: Preempter

      - name: DOORBELL
        bits: 27..8
        access: RO/H
        reset: X
        typical: 0x0
        description: Doorbell count

      - name: --
        bits: 7
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PREEMPTEE
        bits: 6
        access: RO/H
        reset: X
        typical: 0
        description: Preemptee

      - name: STATIC_P
        bits: 5
        access: RO/H
        reset: X
        typical: 0
        description: Static priority

      - name: S_TAIL
        bits: 4
        access: RO/H
        reset: X
        typical: 0
        description: Static tail

      - name: STATIC_Q
        bits: 3
        access: RO/H
        reset: X
        typical: 0
        description: Static priority

      - name: QOS
        bits: 2..0
        access: RO/H
        reset: X
        typical: 0x0
        description: QOS mask to enable the queue when set


  - name: PKO_MEM_DEBUG9
    address: 0x1180050001148
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko.dat.ptr.ptrs0, pko.dat.ptr.ptrs3
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: --
        bits: 63..49
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PTRS0
        bits: 48..32
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: --
        bits: 31..17
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PTRS3
        bits: 16..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state


  - name: PKO_MEM_DEBUG10
    address: 0x1180050001150
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko.dat.ptr.ptrs1, pko.dat.ptr.ptrs2
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: --
        bits: 63..49
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PTRS1
        bits: 48..32
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: --
        bits: 31..17
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: PTRS2
        bits: 16..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state


  - name: PKO_MEM_DEBUG11
    address: 0x1180050001158
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko.out.sta.state[22:0]
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: --
        bits: 63..23
        access: RAZ
        reset: --
        typical: --
        description: RESERVED

      - name: MAJ
        bits: 22
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: UID
        bits: 21..19
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: SOP
        bits: 18
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: LEN
        bits: 17
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: CHK
        bits: 16
        access: RO/H
        reset: X
        typical: 0
        description: Internal state

      - name: CNT
        bits: 15..3
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state

      - name: MOD
        bits: 2..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Internal state


  - name: PKO_MEM_DEBUG12
    address: 0x1180050001160
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko.out.ctl.cmnd[63:0]
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: FAU
        bits: 63..36
        access: RO/H
        reset: X
        typical: 0x0
        description: Fetch and add command words

      - name: CMD
        bits: 35..22
        access: RO/H
        reset: X
        typical: 0x0
        description: Command word

      - name: SEGS
        bits: 21..16
        access: RO/H
        reset: X
        typical: 0x0
        description: Number of segments/gather size

      - name: SIZE
        bits: 15..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Packet length in bytes


  - name: PKO_MEM_DEBUG13
    address: 0x1180050001168
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko.out.ctl.head[63:0]
      This CSR is a memory of 41 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: I
        bits: 63
        access: RO/H
        reset: X
        typical: 0
        description: '"I"  value used for free operation'

      - name: BACK
        bits: 62..59
        access: RO/H
        reset: X
        typical: 0x0
        description: Back value used for free operation

      - name: POOL
        bits: 58..56
        access: RO/H
        reset: X
        typical: 0x0
        description: Pool value used for free operation

      - name: SIZE
        bits: 55..40
        access: RO/H
        reset: X
        typical: 0x0
        description: Size in bytes

      - name: PTR
        bits: 39..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Data pointer


  - name: PKO_MEM_DEBUG14
    address: 0x1180050001170
    bus: RSL
    internal: |
      Internal per-port state intended for debug use only pko.prt.psb.save[63:0]
      This CSR is a memory of 123 entries, and thus, the PKO_REG_READ_IDX CSR must be written before
      any CSR read operations to this address can be performed.
    fields:
      - name: DATA
        bits: 63..0
        access: RO/H
        reset: X
        typical: 0x0
        description: Command words



