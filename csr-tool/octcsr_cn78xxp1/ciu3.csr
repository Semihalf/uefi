# -*- csr3 -*-
# You must run "csr3 rtl" after editing this file!
---
name: CIU3
enums:
  - name: CIU_DEST_E
    title: CIU Destination Enumeration
    attributes:
      width: "9"
    description: |
      Enumerates the different destination interrupts; Note software may wish to calculate these
      enumerations mathematically; the offset between cores is always 3.
    values:
      - name: PP(0..47)_IP(2..4)
        value: 0x000 + a*0x3 + (b-0x2)
        attributes:
          exempt_equation_subtraction: "True"
        description: Core a, IP b


  - name: CIU_DEST_IO_E
    title: CIU IO Destination Enumeration
    attributes:
      width: "5"
    description: Enumerates the different destination I/O interrupts.
    values:
      - name: MCD
        value: 0x00
        description: MCD, as selected by CIU_CTL[MCD_SEL].

      - name: PEM(0..3)
        value: 0x01 + a
        attributes:
          exempt_natural_alignment: "a"
        description: PCI IO bridge a.


  - name: CIU_INTSN_E
    title: CIU Interrupt Source Enumeration
    attributes:
      width: "20"
    description: Enumerates the different interrupts from CIU itself.
    values:
      - name: CIB_NONE
        value: 0x00000
        attributes:
          cib_rtl_module: "none"
          intsn_complex: "1"
        description: |
          INTERNAL: No interrupt.

      - name: CIB_CANCEL
        value: 0x00001
        attributes:
          cib_rtl_module: "none"
          intsn_complex: "1"
        description: |
          INTERNAL: Request not needed as interrupt already cleared.

      - name: CIU_ECC_ISC_SBE
        value: 0x01100
        description: See CIU_INTR_RAM_ECC_ST[ISC_SBE].

      - name: CIU_ECC_ISC_DBE
        value: 0x01101
        description: See CIU_INTR_RAM_ECC_ST[ISC_DBE].

      - name: CIU_ECC_IDT_SBE
        value: 0x01102
        description: See CIU_INTR_RAM_ECC_ST[IDT_SBE].

      - name: CIU_ECC_IDT_DBE
        value: 0x01103
        description: See CIU_INTR_RAM_ECC_ST[IDT_DBE].

      - name: CIU_ECC_SISC_SBE
        value: 0x01104
        description: See CIU_INTR_RAM_ECC_ST[SISC_SBE].

      - name: CIU_ECC_SISC_DBE
        value: 0x01105
        description: See CIU_INTR_RAM_ECC_ST[SISC_DBE].

      - name: CIU_WDOG(0..47)
        value: 0x01200 + a
        attributes:
          cib_rtl_module: "none"
          intsn_complex: "1"
        description: Watchdog interrupts, see CIU_WDOG().

      - name: CIU_TIMER(0..9)_PP(0..47)
        value: 0x02000 + a*0x80 + b
        attributes:
          cib_rtl_module: "none"
          intsn_complex: "1"
        description: General timer interrupts from the corresponding CIU timer expires, see CIU_TIM().

      - name: SW_MBOX(0..511)
        value: 0x04000 + a
        attributes:
          cib_rtl_module: "none"
          intsn_complex: "1"
        description: Software mailbox interrupts. See Software Interrupts.


  - name: CIU_INTSN_MAJOR_E
    title: Master Interrupt Source Number Enumeration
    attributes:
      mif_columns: "See Enumeration"
      width: "8"
    internal: |
      INTERNAL: Where possible, these numbers match the RSLDID assignments in chip_defines.vh.
      Enumerates the upper 8 bits of interrupt source numbers.
    values:
      - name: CIB
        value: 0x00
        attributes:
          see_enumeration: "CIU_INTSN_E"
        description: Internal use only.

      - name: CIU
        value: 0x01
        attributes:
          see_enumeration: "CIU_INTSN_E"
        description: CIU interrupts.

      - name: CIU_TIMER
        value: 0x02
        attributes:
          see_enumeration: "CIU_INTSN_E"
        description: CIU Timer interrupts.

      - name: GPIO
        value: 0x03
        attributes:
          see_enumeration: "GPIO_INTSN_E"
        description: GPIO interrupts.

      - name: SW
        value: 0x04
        attributes:
          see_enumeration: "CIU_INTSN_E"
        description: Software interrupts.

      - name: MPI
        value: 0x05
        attributes:
          see_enumeration: "MPI_INTSN_E"
        description: MPI interrupts.

      - name: RST
        value: 0x06
        attributes:
          see_enumeration: "RST_INTSN_E"
        description: Reset Unit (RST) interrupts.

      - name: MIO_PTP
        value: 0x07
        attributes:
          see_enumeration: "MIO_PTP_INTSN_E"
        description: PTP interrupts.

      - name: MIO_UART
        value: 0x08
        attributes:
          see_enumeration: "MIO_UART_INTSN_E"
        description: UART interrupts.

      - name: MIO_EMM
        value: 0x09
        attributes:
          see_enumeration: "MIO_EMM_INTSN_E"
        description: eMMC interrupts.

      - name: MIO_BOOT
        value: 0x0A
        attributes:
          see_enumeration: "MIO_BOOT_INTSN_E"
        description: Boot-Bus interrupts.

      - name: MIO_TWS
        value: 0x0B
        attributes:
          see_enumeration: "TWS_INTSN_E"
        description: TWSI interrupts.

      - name: LAP(0..1)
        value: 0x0C + a
        attributes:
          see_enumeration: "LAP_INTSN_E"
        description: LAP interrupts.

      - name: MIX
        value: 0x10
        attributes:
          see_enumeration: "MIX_INTSN_E"
        description: MIX interrupts.

      - name: OCX
        value: 0x11
        attributes:
          see_enumeration: "OCX_INTSN_E"
        description: OCX interrupts.

      - name: LBK
        value: 0x12
        attributes:
          see_enumeration: "LBK_INTSN_E"
        description: Loopback interrupts.

      - name: ILK
        value: 0x14
        attributes:
          see_enumeration: "ILK_INTSN_E"
        description: Interlaken interrupts.

      - name: ILA
        value: 0x17
        attributes:
          see_enumeration: "ILA_INTSN_E"
        description: Interlaken-LA interrupts.

      - name: SLI_MSI
        value: 0x1E
        attributes:
          see_enumeration: "SLI_INTSN_E"
        description: SLI MSI interrupts.

      - name: SLI
        value: 0x1F
        attributes:
          see_enumeration: "SLI_INTSN_E"
        description: SLI interrupts.

      - name: KEY
        value: 0x20
        attributes:
          see_enumeration: "KEY_INTSN_E"
        description: KEY interrupts.

      - name: FPA
        value: 0x28
        attributes:
          see_enumeration: "FPA_INTSN_E"
        description: Free Pool Unit (FPA) interrupts.

      - name: FPA_AURA
        value: 0x29
        attributes:
          see_enumeration: "FPA_INTSN_E"
        description: FPA aura interrupts.

      - name: DFA
        value: 0x37
        attributes:
          see_enumeration: "DFA_INTSN_E"
        description: Hyper Finite Automata (HFA) interrupts.

      - name: ZIP
        value: 0x38
        attributes:
          see_enumeration: "ZIP_INTSN_E"
        description: ZIP interrupts.

      - name: PKI
        value: 0x44
        attributes:
          see_enumeration: "PKI_INTSN_E"
        description: PKI interrupts.

      - name: HNA
        value: 0x47
        attributes:
          see_enumeration: "HNA_INTSN_E"
        description: HNA interrupts.

      - name: PKO
        value: 0x50
        attributes:
          see_enumeration: "PKO_INTSN_E"
        description: PKO interrupts.

      - name: PKO_Q
        value: 0x52
        attributes:
          see_enumeration: "PKO_INTSN_E"
        description: PKO interrupts.

      - name: TIM
        value: 0x58
        attributes:
          see_enumeration: "TIM_INTSN_E"
        description: Timer interrupts.

      - name: SSO_TGQ
        value: 0x60
        attributes:
          see_enumeration: "SSO_INTSN_E"
        description: SSO group interrupts.

      - name: SSO_EXE
        value: 0x61
        attributes:
          see_enumeration: "SSO_INTSN_E"
        description: SSO group interrupts.

      - name: SSO
        value: 0x67
        attributes:
          see_enumeration: "SSO_INTSN_E"
        description: SSO interrupts.

      - name: UCTL(0)
        value: 0x68 + a
        attributes:
          see_enumeration: "UCTL_INTSN_E"
        description: USB controller interrupts.

      - name: RAD
        value: 0x70
        attributes:
          see_enumeration: "RAD_INTSN_E"
        description: RAID interrupts.

      - name: L2C
        value: 0x80
        attributes:
          see_enumeration: "L2C_INTSN_E"
        description: L2C interrupts.

      - name: LMC(0..3)
        value: 0x88 + a
        attributes:
          see_enumeration: "LMC_INTSN_E"
        description: LMC interrupts.

      - name: OCLA(0..5)
        value: 0xA8 + a
        attributes:
          see_enumeration: "OCLA_INTSN_E"
        description: OCLA interrupts.

      - name: PEM(0..3)
        value: 0xC0 + a
        attributes:
          see_enumeration: "PEM_INTSN_E"
        description: PEM interrupts.

      - name: OSM
        value: 0xDC
        attributes:
          see_enumeration: "OSM_INTSN_E"
        description: OSM interrupts.

      - name: ASE
        value: 0xDD
        attributes:
          see_enumeration: "ASE_INTSN_E"
        description: ASE interrupts.

      - name: DPI
        value: 0xDF
        attributes:
          see_enumeration: "DPI_INTSN_E"
        description: DPI interrupts.

      - name: BGX(0..5)
        value: 0xE0 + a
        attributes:
          see_enumeration: "BGX_INTSN_E"
        description: BGX interface interrupts.

      - name: IOBN
        value: 0xF0
        attributes:
          see_enumeration: "IOBN_INTSN_E"
        description: IOBN interrupts.

      - name: IOBP
        value: 0xF1
        attributes:
          see_enumeration: "IOBP_INTSN_E"
        description: IOBP interrupts.


structs:
  - name: CIU_PP_INT_S
    title: |
      INTERNAL: Core Interrupt Delivery Structure
    description: This structure specifies the layout of RTL interrupt delivery. It is not visible to software.
    fields:
      - name: RST
        bits: 0
        description: Reset control for the core specified by PPVID.

      - name: DINT
        bits: 1
        description: DINT pulse to core specified by PPVID.

      - name: NMI
        bits: 2
        description: NMI pulse to core specified by PPVID.

      - name: IRQ
        bits: 5..3
        attributes:
          verilog_struct_row_offset: "2"
        description: Interrupt IRQ2,3,4 for the core specified by PPVID.

      - name: PPVID
        bits: 11..6
        description: Virtual core number.

      - name: PWRDWN
        bits: 12
        description: Core does not require power.

      - name: VALID
        bits: 13
        description: Data transmitted on interface is valid..


registers:
  - name: CIU_CTL
    title: CIU Control Register
    address: 0x10100000000E0
    bus: NCB
    fields:
      - name: --
        bits: 63..5
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: MCD_SEL
        bits: 4..3
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          When a MCD interrupt is requested via the IDT, which MCD number to pulse:
          0x0 = MCD0.
          0x1 = MCD1.
          0x2 = MCD2.
          0x3 = Reserved.

      - name: ISCMEM_LE
        bits: 2
        access: R/W
        reset: 0
        typical: 0
        description: Reserved.

      - name: SEQ_DIS
        bits: 1
        access: R/W
        reset: 0
        typical: 0
        description: |
          Disable running sequencer only when required to reduce power, and run continuously. For
          diagnostic use only.

      - name: CCLK_DIS
        bits: 0
        access: R/W
        reset: 0
        typical: 0
        description: Disable power saving conditional clocking.


  - name: CIU_PP_RST
    title: CIU Cores Reset Register
    address: 0x1010000000100
    bus: NCB
    description: |
      This register contains the reset control for each core. A 1 holds a core in reset, 0 release
      from reset. It resets to all ones when REMOTE_BOOT is enabled or all ones excluding bit 0 when
      REMOTE_BOOT is disabled. Writes to this register should occur only if the CIU_PP_RST_PENDING
      register is cleared.
    attributes:
      regtest_skip: "True"
    fields:
      - name: --
        bits: 63..48
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: RST
        bits: 47..1
        access: R/W
        reset: all-ones
        typical: 0x0
        attributes:
          regtest_force: "0"
        description: |
          Core reset for cores 1 and above. Writing a 1 holds the corresponding core in reset,
          writing a 0 releases from reset.

      - name: RST0
        bits: 0
        access: R/W
        reset: --
        typical: 0
        attributes:
          regtest_force: "0"
        description: Core reset for core 0, depends on standalone mode.


  - name: CIU_PP_RST_PENDING
    title: CIU Cores Reset Pending Register
    address: 0x1010000000110
    bus: NCB
    description: This register contains the reset status for each core.
    fields:
      - name: --
        bits: 63..48
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: PEND
        bits: 47..0
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: |
          Set if corresponding core is waiting to change its reset state. Normally a reset change
          occurs immediately but if RST_PP_POWER[GATE] bit is set and the core is released from
          reset a delay of 64K core clocks between each core reset will apply to satisfy power
          management.


  - name: CIU_PP_DBG
    title: CIU Cores Debug Register
    address: 0x1010000000120
    bus: NCB
    fields:
      - name: --
        bits: 63..48
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: PPDBG
        bits: 47..0
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: Debug[DM] value for each core, whether the cores are in debug mode or not.


  - name: CIU_GSTOP
    title: CIU Global-Stop Register
    address: 0x1010000000140
    bus: NCB
    fields:
      - name: --
        bits: 63..1
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: GSTOP
        bits: 0
        access: R/W
        reset: 0
        typical: 0
        attributes:
          regtest_force: "0"
        description: Set global-stop mode.


  - name: CIU_NMI
    title: CIU NonMaskable Interrupt Register
    address: 0x1010000000160
    bus: NCB
    fields:
      - name: --
        bits: 63..48
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: NMI
        bits: 47..0
        access: WO
        reset: 0x0
        typical: 0x0
        attributes:
          regtest_force: "0"
        description: Writing a 1 to a bit sends an NMI pulse to the corresponding core vector.


  - name: CIU_DINT
    title: CIU Debug Interrupt Register
    address: 0x1010000000180
    bus: NCB
    fields:
      - name: --
        bits: 63..48
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: DINT
        bits: 47..0
        access: WO
        reset: 0x0
        typical: 0x0
        attributes:
          regtest_force: "0"
        description: Writing a 1 to a bit sends a DINT pulse to corresponding core vector.


  - name: CIU_FUSE
    title: CIU Fuse Register
    address: 0x10100000001A0
    bus: NCB
    fields:
      - name: --
        bits: 63..48
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: FUSE
        bits: 47..0
        access: RO
        reset: --
        typical: --
        description: Each bit set indicates a physical core is present.


  - name: CIU_BIST
    title: CIU BIST Register
    address: 0x10100000001C0
    bus: NCB
    attributes:
      dv_bist_all_fail_test: "ALL"
    fields:
      - name: --
        bits: 63..9
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: BIST
        bits: 8..0
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: |
          BIST results. Hardware sets a bit for each memory that fails BIST. INTERNAL:
          <8>= ncbo_crd_fif_mem0.
          <7> = ciu_nbt_rsp_ram.
          <6> = ciu_isc_ram2.
          <5> = ciu_isc_ram1.
          <4> = ciu_isc_ram0.
          <3> = ciu_sist_ram.
          <2> = ciu_idt_ram.
          <1> = csr req_mem.
          <0> = ciu3_wdg_ctl_mem.


  - name: CIU_CONST
    title: CIU Constants Register
    address: 0x1010000000220
    bus: NCB
    fields:
      - name: DESTS_IO
        bits: 63..48
        access: RO
        reset: 0x5
        typical: 0x5
        description: Number of entries in CIU_DEST(0..4)_IO_INT.

      - name: PINTSN
        bits: 47..32
        access: RO
        reset: 0x3000
        typical: 0x3000
        description: Physical INTSNs implemented.

      - name: DESTS_PP
        bits: 31..16
        access: RO
        reset: 0x90
        typical: 0x90
        description: Number of entries in CIU_DEST(0..143)_PP_INT.

      - name: IDT
        bits: 15..0
        access: RO
        reset: 0x100
        typical: 0x100
        description: Number of entries in CIU_IDT(0..255)_CTL.


  - name: CIU_INTR_SLOWDOWN
    title: CIU Interrupt Slow Down Register
    address: 0x1010000000240
    bus: NCB
    fields:
      - name: --
        bits: 63..3
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: CTL
        bits: 2..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Slow down CIU interrupt walker processing time. IRQ2/3/4 for all cores are sent to the
          core (MRC) in a serial bus to reduce global routing. There is no backpressure mechanism
          designed for this scheme. It will only be a problem when SCLK is faster; this control will
          process 1 interrupt in 4*(2^CTL) SCLK cycles. For example:
          0x0 = sclk_freq/aclk_freq ratio is 4.
          0x1 = sclk_freq/aclk_freq ratio is 8.


  - name: CIU_INTR_RAM_ECC_CTL
    title: CIU Interrupt RAM ECC Control Register
    address: 0x1010000000260
    bus: NCB
    fields:
      - name: --
        bits: 63..3
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: FLIP_SYND
        bits: 2..1
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Testing feature. Flip syndrome to generate single-bit or double-bit errors. FLIP_SYND<0>
          generates even numbered bits errors; FLIP_SYND<1> generates odd bits errors.

      - name: ECC_ENA
        bits: 0
        access: R/W
        reset: 1
        typical: 1
        description: |
          ECC enable. When set, enables the 9-bit ECC check/correct logic for CIU interrupt-enable
          RAM. With ECC enabled, the ECC code is generated and written in memory, and then later on
          reads, is used to check and correct single-bit errors and detect double-bit errors.


  - name: CIU_INTR_RAM_ECC_ST
    title: CIU Interrupt RAM ECC State Register
    address: 0x1010000000280
    bus: NCB
    fields:
      - name: --
        bits: 63..52
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: ADDR
        bits: 51..32
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: Latch the address for latest SBE/DBE that occurred.

      - name: --
        bits: 31..6
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: SISC_DBE
        bits: 5
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          SISC Double-bit error observed. Throws CIU_INTSN_E::CIU_ECC_SISC_DBE.

      - name: SISC_SBE
        bits: 4
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          SISC Single-bit error observed. Throws CIU_INTSN_E::CIU_ECC_SISC_SBE.

      - name: IDT_DBE
        bits: 3
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          IDT Double-bit error observed. Throws CIU_INTSN_E::CIU_ECC_IDT_DBE.

      - name: IDT_SBE
        bits: 2
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          IDT Single-bit error observed. Throws CIU_INTSN_E::CIU_ECC_IDT_SBE.

      - name: ISC_DBE
        bits: 1
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          ISC Double-bit error observed. Throws CIU_INTSN_E::CIU_ECC_ISC_DBE.

      - name: ISC_SBE
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          ISC Single-bit error observed. Throws CIU_INTSN_E::CIU_ECC_ISC_SBE.


  - name: CIU_INTR_READY
    title: CIU Interrupt Scanner Ready Register
    address: 0x10100000002A0
    bus: NCB
    fields:
      - name: --
        bits: 63..46
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: INDEX
        bits: 45..32
        access: RO/H
        reset: --
        typical: --
        description: |
          Scanner index. If [READY] set, the current index, else the index the scanner stopped at.
          For diagnostic use only.

      - name: --
        bits: 31..1
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: READY
        bits: 0
        access: R/W1C/H
        reset: 1
        typical: 1
        description: |
          CIU is idle. If clear, CIU is performing a background scan searching for secondary
          interrupts. Write one to force a new scan. For diagnostic use only.


  - name: CIU_TIM(0..9)
    title: CIU General Timer Registers
    address: 0x1010000010000 + a*0x8
    bus: NCB
    attributes:
      dv_fc_scratch: "a=(0)"
    fields:
      - name: --
        bits: 63..37
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: ONE_SHOT
        bits: 36
        access: R/W
        reset: 0
        typical: 0
        description: |
          One-shot mode when LEN != 0x0:
          0 = Timer is in periodic mode.
          1 = Timer is in one-shot mode.

      - name: LEN
        bits: 35..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Time-out length in coprocessor clock cycles. The timer disabled when LEN = 0x0. Periodic
          interrupts will occur every LEN+1 coprocessor clock cycles when ONE_SHOT = 0


  - name: CIU_WDOG(0..47)
    title: CIU Watchdog Registers
    address: 0x1010000020000 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..46
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: GSTOPEN
        bits: 45
        access: R/W
        reset: 0
        typical: 0
        description: Global-stop enable.

      - name: DSTOP
        bits: 44
        access: R/W
        reset: 0
        typical: 0
        description: Debug-stop enable.

      - name: CNT
        bits: 43..20
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: |
          Number of 1024-cycle intervals until next watchdog expiration. Cleared on write to
          associated CIU_PP_POKE() register.

      - name: LEN
        bits: 19..4
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Watchdog time-expiration length. The most-significant 16 bits of a 24-bit decrementer that
          decrements every 1024 cycles. Must be set > 0.

      - name: STATE
        bits: 3..2
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: |
          Watchdog state. The number of watchdog time expirations since last core poke. Cleared on
          write to associated CIU_PP_POKE() register.

      - name: MODE
        bits: 1..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Watchdog mode:
          0x0 = Off.
          0x1 = Interrupt only.
          0x2 = Interrupt + NMI.
          0x3 = Interrupt + NMI + soft reset.


  - name: CIU_PP_POKE(0..47)
    title: CIU Cores Poke Registers
    address: 0x1010000030000 + a*0x8
    bus: NCB
    attributes:
      regtest_skip: "True"
    fields:
      - name: --
        bits: 63..1
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: POKE
        bits: 0
        access: R/W
        reset: --
        typical: --
        description: |
          Core poke. Writing any value to this register does the following:
          * clears any pending interrupt generated by the associated watchdog.
          * resets CIU_WDOG()[STATE] to 0x0.
          * sets CIU_WDOG()[CNT] to ( CIU_WDOG()[LEN] << 8).

          Reading this register returns the associated CIU_WDOG() register.


  - name: CIU_IDT(0..255)_CTL
    title: CIU IDT Control Registers
    address: 0x1010000110000 + a*0x8
    bus: NCB
    description: Entry zero of the IDT is reserved to mean 'no interrupt' and is not writable by software.
    attributes:
      arch_max: "1024"
    fields:
      - name: --
        bits: 63..52
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: INTSN
        bits: 51..32
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: |
          Interrupt source number causing the current interrupt, or most recent interrupt if INTR is
          clear. INTERNAL: Hardware does not store the 20 bit INTSN here; it instead stores the
          sparse 12 bit PINTSN, and maps it to INTSN on a read.

      - name: --
        bits: 31..4
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: INTR
        bits: 3
        access: RO/H
        reset: 0
        typical: 0
        description: Interrupt pending

      - name: NEWINT
        bits: 2
        access: RO/H
        reset: 0
        typical: 0
        description: New interrupt to be delivered. Internal state, for diagnostic use only.

      - name: IP_NUM
        bits: 1..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Destination interrupt priority level to receive this interrupt. Only used for core
          interrupts; for IO interrupts this level must be zero.
          0x0 = IP2, or I/O interrupt.
          0x1 = IP3.
          0x2 = IP4.
          0x3 = Reserved.


  - name: CIU_IDT(0..255)_PP(0..0)
    title: CIU IDT Core Select Registers
    address: 0x1010000120000 + a*0x20 + b*0x8
    bus: NCB
    description: |
      Entry zero of the IDT is reserved to mean 'no interrupt' and is not writable by software. The
      second (PP) index in this register is always zero to allow expansion beyond 64 cores.
    attributes:
      arch_max: "1024,4"
    fields:
      - name: --
        bits: 63..48
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: PP
        bits: 47..0
        access: R/W
        reset: 0x0
        typical: --
        description: Bitmask of which cores receive interrupts via this IDT.


  - name: CIU_IDT(0..255)_IO
    title: CIU IDT I/O Select Registers
    address: 0x1010000130000 + a*0x8
    bus: NCB
    description: Entry zero of the IDT is reserved to mean 'no interrupt' and is not writable by software.
    fields:
      - name: --
        bits: 63..5
        access: RAZ
        reset: --
        typical: --
        description: |
          Reserved. INTERNAL: If adding, be sure to update CIU_DEST_IO_E and CIU_CONST[DESTS_IO].

      - name: IO
        bits: 4..0
        access: R/W
        reset: 0x0
        typical: --
        description: |
          Bitmask of which IO bridges or MCD to receive interrupts via this IDT.
          Enumerated with CIU_DEST_IO_E.


  - name: CIU_DEST(0..143)_PP_INT
    title: CIU PP Destination Registers
    address: 0x1010000200000 + a*0x8
    bus: NCB
    description: |
      This register contains reduced interrupt source numbers for delivery to software, indexed by
      CIU_DEST_E.
    attributes:
      arch_max: "512"
    fields:
      - name: --
        bits: 63..52
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: INTSN
        bits: 51..32
        access: RO/H
        reset: 0x0
        typical: --
        description: |
          Interrupt source number causing the current interrupt, or most recent interrupt if INTR is
          clear. Note this field is not stored in the DEST ram itself; it is instead read from
          CIU_IDT()_CTL[INTSN].

      - name: --
        bits: 31..10
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: INTIDT
        bits: 9..2
        access: RO/H
        reset: 0x0
        typical: --
        description: IDT entry number causing the current interrupt, or most recent interrupt if INTR is clear.

      - name: NEWINT
        bits: 1
        access: RO/H
        reset: 0
        typical: 0
        description: New interrupt to be delivered. Internal state, for diagnostic use only.

      - name: INTR
        bits: 0
        access: RO/H
        reset: 0
        typical: 0
        description: |
          Interrupt pending. This bit is recalculated when CIU_ISC()_CTL or interrupts
          change, so does not need to be cleared by software.


  - name: CIU_DEST(0..4)_IO_INT
    title: CIU I/O Destination Registers
    address: 0x1010000210000 + a*0x8
    bus: NCB
    description: |
      This register contains reduced interrupt source numbers for delivery to software, indexed by
      I/O bridge number. Fields are identical to CIU_DEST()_PP_INT.
    attributes:
      arch_max: "64"
    inherits: CIU_DEST(0..143)_PP_INT

  - name: CIU_SISC(0..191)
    title: CIU Secondary-ISC State Registers
    address: 0x1010000220000 + a*0x8
    bus: NCB
    fields:
      - name: EN
        bits: 63..0
        access: RO/H
        reset: 0x0
        typical: --
        description: Indicates each corresponding ISC entry has enabled & interrupting entry. For diagnostic use only.


  - name: CIU_ISC(0..1048575)_CTL
    title: CIU Interrupt Source Control Registers
    address: 0x1010080000000 + a*0x8
    bus: NCB
    description: Sparse table indexed by INTSN.
    attributes:
      dv_testbuilder_no_create: "True"
      dv_uvm_no_create: "True"
    fields:
      - name: --
        bits: 63..24
        access: RAZ
        reset: --
        typical: --
        description: |
          Reserved INTERNAL: 19:17 for more IDTs.

      - name: IDT
        bits: 23..16
        access: R/W
        reset: 0x0
        typical: 0x0
        attributes:
          regtest_force: "0"
        description: |
          Interrupt Delivery Table entry number. Zero indicates IDT delivery is disabled. This field
          may only be changed when EN was previously clear, though it may be changed with the same
          write that sets EN. Thus if EN is set, to change IDT two register writes are required, the
          first to clear EN (perhaps by a store to CIU_ISC()_W1C), and the second to make
          the change to IDT.

      - name: IMP
        bits: 15
        access: RO/H
        reset: --
        typical: --
        description: |
          Entry implemented. Although the table has 1M entries, most of those do not correspond to
          any INTSN, and as such are not implemented.

          1 = The IDT and EN fields for this index are R/W, and may have a corresponding INTSN,
          although some indices may have IMP set but not have any INTSN use.

          0 = The IDT and EN fields for this index are RAZ, and do not have any corresponding
          INTSN.

      - name: --
        bits: 14..2
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 1
        access: R/W
        reset: 0
        typical: 0
        attributes:
          regtest_force: "0"
        description: Enable interrupt delivery.

      - name: RAW
        bits: 0
        access: RO/H
        reset: 0
        typical: 0
        description: |
          Interrupt pending before masking. Note read only, must use
          CIU_ISC()_W1C/CIU_ISC()_W1S to toggle.


  - name: CIU_ISC(0..1048575)_W1C
    title: CIU Interrupt Source Clear Registers
    address: 0x1010090000000 + a*0x8
    bus: NCB
    attributes:
      dv_testbuilder_no_create: "True"
      dv_uvm_no_create: "True"
    fields:
      - name: --
        bits: 63..2
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 1
        access: R/W1C
        reset: 0
        typical: 0
        description: Clear enable interrupt delivery. See CIU_ISC()_CTL[EN].

      - name: RAW
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: Clear interrupt pending. See CIU_ISC()_CTL[RAW].


  - name: CIU_ISC(0..1048575)_W1S
    title: CIU Interrupt Source Set Registers
    address: 0x10100A0000000 + a*0x8
    bus: NCB
    attributes:
      dv_testbuilder_no_create: "True"
      dv_uvm_no_create: "True"
    fields:
      - name: --
        bits: 63..2
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 1
        access: R/W1S
        reset: 0
        typical: 0
        description: Set enable interrupt delivery. See CIU_ISC()_CTL[EN].

      - name: RAW
        bits: 0
        access: R/W1S/H
        reset: 0
        typical: 0
        description: Set interrupt pending. See CIU_ISC()_CTL[RAW].



