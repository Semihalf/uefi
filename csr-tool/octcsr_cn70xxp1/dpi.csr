# -*- csr3 -*-
# You must run "csr3 rtl" after editing this file!
---
name: DPI
description: |
  CSR MAP

  +----------------------------+
  | DPI_BIST_STATUS            | 0x000 -- 0
  +----------------------------+
  | DPI_INT_REG                | 0x001 -- 1
  +----------------------------+
  | DPI_INT_EN                 | 0x002 -- 2
  +----------------------------+
  | Spare                      | 0x003 -- 3
  +----------------------------+
  | Spare                      | 0x004 -- 4
  |  was DPI_INT_PRTx_EN       |
  |  (4 regs)                  | 0x007 -- 7
  +----------------------------+
  | DPI_CTL                    | 0x008 -- 8
  +----------------------------+
  | DPI_DMA_CONTROL            | 0x009 -- 9
  +----------------------------+
  | DPI_REQ_GBL_EN             | 0x00a -- 10
  | DPI_REQ_ERR_RSP            | 0x00b -- 10
  | DPI_REQ_ERR_RST            | 0x00c -- 10
  | DPI_REQ_ERR_RSP_EN         | 0x00d -- 10
  | DPI_REQ_ERR_RST_EN         | 0x00e -- 10
  +----------------------------+
  | DPI_PKT_ERR_RSP            | 0x00f -- 15
  +----------------------------+
  | DPI_DMA_ENG*_EN            | 0x010 -- 16
  |  (6 regs)                  | 0x015 -- 21
  +----------------------------+
  | Reserved for Expansion     | 0x016 -- 22
  |  to 8 DMA Engines          |
  |  (2 regs)                  | 0x017 -- 23
  +----------------------------+
  | Spare                      | 0x018 -- 24
  |  (40 regs)                 | 0x03f -- 63
  +----------------------------+-------------------------vvvvvvvvvvv
  | DPI_DMA*_DBELL             | 0x040 -- 64      mapped to req unit
  |  (8 regs)                  | 0x047 -- 71
  +----------------------------+
  | Reserved for Expansion     | 0x048 -- 72
  |  to 16 Req Queues          |
  |  (8 regs)                  | 0x04f -- 79
  +----------------------------+
  | DPI_DMA*_IBUFF_SADDR       | 0x050 -- 80
  |  (8 regs)                  | 0x057 -- 87
  +----------------------------+
  | Reserved for Expansion     | 0x058 -- 88
  |  to 16 Req Queues          |
  |  (8 regs)                  | 0x05f -- 95
  +----------------------------+
  | DPI_DMA*_COUNTS            | 0x060 -- 96
  |  (8 regs)                  | 0x067 -- 103
  +----------------------------+
  | Reserved for Expansion     | 0x068 -- 104
  |  to 16 Req Queues          |
  |  (8 regs)                  | 0x06f -- 111
  +----------------------------+
  | DPI_DMA*_NADDR             | 0x070 -- 112
  |  (8 regs)                  | 0x077 -- 119
  +----------------------------+
  | Reserved for Expansion     | 0x078 -- 120
  |  to 16 Req Queues          |
  |  (8 regs)                  | 0x07f -- 127
  +----------------------------+
  | DPI_DMA*_REQBNK0           | 0x080 -- 128
  |  (8 regs)                  | 0x087 -- 135
  +----------------------------+
  | Reserved for Expansion     | 0x088 -- 136
  |  to 16 Req Queues          |
  |  (8 regs)                  | 0x08f -- 143
  +----------------------------+
  | DPI_DMA*_REQBNK1           | 0x090 -- 144
  |  (8 regs)                  | 0x097 -- 151
  +----------------------------+
  | Reserved for Expansion     | 0x098 -- 152
  |  to 16 Req Queues          |
  |  (8 regs)                  | 0x09f -- 159     mapped to req unit
  +----------------------------+-------------------------^^^^^^^^^^^
  | Spare                      | 0x0a0 -- 160
  |  (96 regs)                 | 0x0ff -- 255
  +----------------------------+
  | DPI_NCB@_CFG               | 0x100 -- 256
  +----------------------------+
  | Reserved for Expansion     | 0x101 -- 257
  |  to 2 NCB interfaces  |
  |  (1 reg)                   |
  +----------------------------+
  | Spare                      | 0x102 -- 258
  |  (4 regs)                  | 0x105 -- 261
  +----------------------------+
  | DPI_PINT_INFO              | 0x106 -- 262
  +----------------------------+
  | DPI_REQ_ERR_SKIP_COMP      | 0x107 -- 263
  +----------------------------+
  | Spare                      | 0x108 -- 264
  |  (8 regs)                  | 0x10f -- 271
  +----------------------------+
  | DPI_ENG*_BUF               | 0x110 -- 272
  |  (6 regs)                  | 0x115 -- 277
  +----------------------------+
  | Reserved for Expansion     | 0x116 -- 278
  |  to 8 DMA Engines          |
  |  (2 regs)                  | 0x117 -- 279
  +----------------------------+
  | Spare                      | 0x118 -- 280
  |  (8 regs)                  | 0x11f -- 287
  +----------------------------+
  | DPI_SLI_PRT@_CFG           | 0x120 -- 288
  |  (2 regs)                  | 0x121 -- 289
  +----------------------------+
  | DPI_SLI_PRT@_CFG           | 0x122 -- 290
  |  to 4 SLI Ports            |
  |  (2 regs)                  | 0x123 -- 291
  +----------------------------+
  | DPI_SLI_PRT@_ERR           | 0x124 -- 292
  |  (2 regs)                  | 0x125 -- 293
  +----------------------------+
  | DPI_SLI_PRT@_ERR           | 0x126 -- 294
  |  to 4 SLI Ports            |
  |  (2 regs)                  | 0x127 -- 295
  +----------------------------+
  | DPI_SLI_PRT@_ERR_INFO      | 0x128 -- 296
  |  (2 regs)                  | 0x129 -- 297
  +----------------------------+
  | DPI_SLI_PRT@_ERR_INFO      | 0x12a -- 298
  |  to 4 SLI Ports            |
  |  (2 regs)                  | 0x12b -- 299
  +----------------------------+
  | Spare                      | 0x12c -- 300
  |  (4 regs)                  | 0x12f -- 303
  +----------------------------+
  | DPI_INFO_REG               | 0x130 -- 304
  +----------------------------+
  | Spare                      | 0x131 -- 305
  |  (15 regs)                 | 0x13f -- 319
  +----------------------------+
  | DPI_DMA*_IFLIGHT           | 0x140 -- 320
  |  (8 regs)                  | 0x147 -- 327
  +----------------------------+
  | Reserved for Expansion     | 0x148 -- 328
  |  to 16 Req Queues          |
  |  (8 regs)                  | 0x14f -- 335
  +----------------------------+
  | DPI_DMA*_ERR_RSP_STATUS    | 0x150 -- 336
  |  (8 regs)                  | 0x157 -- 343
  +----------------------------+
  | Reserved for Expansion     | 0x158 -- 344
  |  to 16 Req Queues          |
  |  (8 regs)                  | 0x15f -- 351
  +----------------------------+
  | $DPI_DMA_PP*_CNT           | 0x160 -- 352
  |  (4 regs)                  | 0x163 -- 355
  +----------------------------+
  | Reserved for Expansion     | 0x164 -- 356
  |  to 64 Req PP's            |
  |  (60 regs)                 | 0x19F -- 415
  +----------------------------+

  Registers higher then 0x10000 are ncb access to MAC functionality
  +----------------------------+
  | Reserved for Expansion     |
  | $DPI__SRIO_FWD_PATH        | 0x10000 -- 4096 + 0
  +----------------------------+
  | Reserved for Expansion     | 0x10001 -- 4096 + 1
  |  for single regs           |
  |  (63 regs)                 | 0x1003F -- 4096 + 63
  +----------------------------+
  | Reserved for Expansion     |
  | $DPI_SRIO_RX_BELL          | 0x10040 -- 4096 + 64
  |  (64 regs)                 | 0x1007F -- 4096 + 127
  +----------------------------+
  | Reserved for Expansion     |
  | $DPI_SRIO_RX_BELL_SEQ      | 0x10080 -- 4096 + 128
  |  (64 regs)                 | 0x100BF -- 4096 + 191
  +----------------------------+
registers:
  - name: DPI_BIST_STATUS
    address: 0x1DF0000000000
    bus: NCB
    fields:
      - name: --
        bits: 63..47
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: BIST
        bits: 46..0
        access: RO
        reset: 0x0
        typical: 0x0
        description: |
          BIST Results.
          HW sets a bit in BIST for for memory that fails
          BIST.


  - name: DPI_INT_REG
    address: 0x1DF0000000008
    bus: NCB
    fields:
      - name: --
        bits: 63..28
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: SPRT3_RST
        bits: 27
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT2_RST
        bits: 26
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT1_RST
        bits: 25
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT0_RST
        bits: 24
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: --
        bits: 23
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: REQ_BADFIL
        bits: 22
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction unexpected fill
          Instruction fill when none outstanding.

      - name: REQ_INULL
        bits: 21
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction filled with NULL pointer
          Next pointer was NULL.

      - name: REQ_ANULL
        bits: 20
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction filled with bad instruction
          Fetched instruction word was 0.

      - name: REQ_UNDFLW
        bits: 19
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction FIFO underflow
          DPI tracks outstanding instructions fetches.
          Interrupt will fire when FIFO underflows.

      - name: REQ_OVRFLW
        bits: 18
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction FIFO overflow
          DPI tracks outstanding instructions fetches.
          Interrupt will fire when FIFO overflows.

      - name: REQ_BADLEN
        bits: 17
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction fetch with length
          Interrupt will fire if DPI forms an instruction
          fetch with length of zero.

      - name: REQ_BADADR
        bits: 16
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          DMA instruction fetch with bad pointer
          Interrupt will fire if DPI forms an instruction
          fetch to the NULL pointer.

      - name: DMADBO
        bits: 15..8
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          DMAx doorbell overflow.
          DPI has a 32-bit counter for each request's queue
          outstanding doorbell counts. Interrupt will fire
          if the count overflows.

      - name: --
        bits: 7..2
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: NFOVR
        bits: 1
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          CSR Fifo Overflow
          DPI can store upto 16 CSR request.  The FIFO will
          overflow if that number is exceeded.

      - name: NDERR
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          NCB Decode Error
          DPI received a NCB transaction on the outbound
          bus to the DPI deviceID, but the command was not
          recognized.


  - name: DPI_INT_EN
    address: 0x1DF0000000010
    bus: NCB
    attributes:
      dv_fc_scratch: "ALL"
    fields:
      - name: --
        bits: 63..28
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: SPRT3_RST
        bits: 27
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT2_RST
        bits: 26
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT1_RST
        bits: 25
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT0_RST
        bits: 24
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: --
        bits: 23
        access: R/W
        reset: --
        typical: --
        description: Reserved.

      - name: REQ_BADFIL
        bits: 22
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction unexpected fill

      - name: REQ_INULL
        bits: 21
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction filled with NULL pointer

      - name: REQ_ANULL
        bits: 20
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction filled with bad instruction

      - name: REQ_UNDFLW
        bits: 19
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction FIFO underflow

      - name: REQ_OVRFLW
        bits: 18
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction FIFO overflow

      - name: REQ_BADLEN
        bits: 17
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction fetch with length

      - name: REQ_BADADR
        bits: 16
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction fetch with bad pointer

      - name: DMADBO
        bits: 15..8
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: DMAx doorbell overflow.

      - name: --
        bits: 7..2
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Reserved.

      - name: NFOVR
        bits: 1
        access: R/W
        reset: 0
        typical: 0
        description: CSR Fifo Overflow

      - name: NDERR
        bits: 0
        access: R/W
        reset: 0
        typical: 0
        description: NCB Decode Error


  - name: DPI_CTL
    address: 0x1DF0000000040
    bus: NCB
    fields:
      - name: --
        bits: 63..1
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 0
        access: R/W
        reset: 0
        typical: 1
        description: Turns on the DMA and Packet state machines


  - name: DPI_DMA_CONTROL
    title: DMA Control Register
    address: 0x1DF0000000048
    bus: NCB
    description: Controls operation of the DMA IN/OUT.
    fields:
      - name: --
        bits: 63..62
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: DICI_MODE
        bits: 61
        access: R/W
        reset: 0
        typical: --
        description: |
          DMA Instruction Completion Interrupt Mode
          turns on mode to increment DPI_DMA_PPx_CNT
          counters.

      - name: PKT_EN1
        bits: 60
        access: R/W
        reset: 0
        typical: --
        description: |
          Enables the 2nd packet interface.
          When the packet interface is enabled, engine 4
          is used for packets and is not available for DMA.
          The packet interfaces must be enabled in order.
          When PKT_EN1=1, then PKT_EN=1.
          When PKT_EN1=1, then DMA_ENB<4>=0.

      - name: FFP_DIS
        bits: 59
        access: R/W
        reset: 0
        typical: 0
        description: |
          Force forward progress disable
          The DMA engines will compete for shared resources.
          If the HW detects that particular engines are not
          able to make requests to an interface, the HW
          will periodically trade-off throughput for
          fairness.

      - name: COMMIT_MODE
        bits: 58
        access: R/W
        reset: 0
        typical: 0
        description: |
          DMA Engine Commit Mode

          When COMMIT_MODE=1, DPI considers an instruction
          complete when the HW internally generates the
          final write for the current instruction.

          When COMMIT_MODE=0, DPI additionally waits for
          the final write to reach the interface coherency
          point to declare the instructions complete.

          Please note: when COMMIT_MODE == 1, DPI may not
          follow the HRM ordering rules.

          DPI hardware performance may be better with
          COMMIT_MODE == 1 than with COMMIT_MODE == 0 due
          to the relaxed ordering rules.

          If the HRM ordering rules are required, set
          COMMIT_MODE == 0.

      - name: PKT_HP
        bits: 57
        access: RO
        reset: 0
        typical: 0
        description: |
          High-Priority Mode for Packet Interface.
          This mode has been deprecated.

      - name: PKT_EN
        bits: 56
        access: R/W
        reset: 0
        typical: --
        description: |
          Enables 1st the packet interface.
          When the packet interface is enabled, engine 5
          is used for packets and is not available for DMA.
          When PKT_EN=1, then DMA_ENB<5>=0.
          When PKT_EN1=1, then PKT_EN=1.

      - name: --
        bits: 55..54
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: DMA_ENB
        bits: 53..48
        access: R/W
        reset: 0x0
        typical: 0x3f
        description: |
          DMA engine enable. Enables the operation of the
          DMA engine. After being enabled an engine should
          not be disabled while processing instructions.
          When PKT_EN=1,  then DMA_ENB<5>=0.
          When PKT_EN1=1, then DMA_ENB<4>=0.

      - name: --
        bits: 47..34
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: B0_LEND
        bits: 33
        access: R/W
        reset: 0
        typical: 0
        description: |
          When set '1' and the DPI is in the mode to write
          0 to L2C memory when a DMA is done, the address
          to be written to will be treated as a Little
          Endian address.

      - name: DWB_DENB
        bits: 32
        access: R/W
        reset: 0
        typical: 1
        description: |
          When set '1', DPI will send a value in the DWB
          field for a free page operation for the memory
          that contained the data.

      - name: DWB_ICHK
        bits: 31..23
        access: R/W
        reset: 0x0
        typical: --
        description: |
          When Instruction Chunks for DMA operations are
          freed this value is used for the DWB field of the
          operation.

      - name: FPA_QUE
        bits: 22..20
        access: R/W
        reset: 0x0
        typical: --
        description: |
          The FPA queue that the instruction-chunk page will
          be returned to when used.

      - name: O_ADD1
        bits: 19
        access: R/W
        reset: 0
        typical: 1
        description: |
          When set '1' 1 will be added to the SLI_DMA@_CNT
          DMA counters, if '0' then the number of bytes
          in the dma transfer will be added to the
          SLI_DMA@_CNT count register.

      - name: O_RO
        bits: 18
        access: R/W
        reset: 0
        typical: --
        description: Relaxed Ordering Mode for DMA.

      - name: O_NS
        bits: 17
        access: R/W
        reset: 0
        typical: --
        description: Nosnoop For DMA.

      - name: O_ES
        bits: 16..15
        access: R/W
        reset: 0x0
        typical: --
        description: Endian Swap Mode for DMA.

      - name: O_MODE
        bits: 14
        access: R/W
        reset: 0
        typical: 1
        description: |
          Select PCI_POINTER MODE to be used.
          0=DPTR format 1 is used
          use register values for address and pointer
          values for ES, NS, RO
          1=DPTR format 0 is used
          use pointer values for address and register
          values for ES, NS, RO

      - name: --
        bits: 13..0
        access: RAZ
        reset: --
        typical: --
        description: Reserved.


  - name: DPI_REQ_GBL_EN
    address: 0x1DF0000000050
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: QEN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Indicates which instruction queues are enabled and
          can dispatch instructions to a requesting engine.


  - name: DPI_REQ_ERR_RSP
    address: 0x1DF0000000058
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: QERR
        bits: 7..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue received an
          ErrorResponse from the I/O subsystem.
          SW must clear the bit before the the cooresponding
          instruction queue will continue processing
          instructions if DPI_REQ_ERR_RSP_EN[EN] is set.


  - name: DPI_REQ_ERR_RST
    address: 0x1DF0000000060
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: QERR
        bits: 7..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue dropped an
          instruction because the source or destination
          was in reset.
          SW must clear the bit before the the cooresponding
          instruction queue will continue processing
          instructions if DPI_REQ_ERR_RST_EN[EN] is set.


  - name: DPI_REQ_ERR_RSP_EN
    address: 0x1DF0000000068
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Indicates which instruction queues should stop
          dispatching instructions when an  ErrorResponse
          is received from the I/O subsystem.


  - name: DPI_REQ_ERR_RST_EN
    address: 0x1DF0000000070
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Indicates which instruction queues should stop
          dispatching instructions when an instruction
          is dropped because the source or destination port
          is in reset.


  - name: DPI_PKT_ERR_RSP
    address: 0x1DF0000000078
    bus: NCB
    fields:
      - name: --
        bits: 63..1
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: PKTERR
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Indicates that an ErrorResponse was received from
          the I/O subsystem.


  - name: DPI_DMA_ENG(0..5)_EN
    address: 0x1DF0000000080 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: QEN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Controls which logical instruction queues can be
          serviced by the DMA engine. Setting QEN==0
          effectively disables the engine.
          When DPI_DMA_CONTROL[PKT_EN] = 1, then
          DPI_DMA_ENG5_EN[QEN] must be zero.
          When DPI_DMA_CONTROL[PKT_EN1] = 1, then
          DPI_DMA_ENG4_EN[QEN] must be zero.


  - name: DPI_DMA(0..7)_DBELL
    address: 0x1DF0000000200 + a*0x8
    bus: NCB
    description: The door bell register for DMA[0..7] queue.
    fields:
      - name: --
        bits: 63..16
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: DBELL
        bits: 15..0
        access: WO/H
        reset: 0x0
        typical: --
        description: |
          The value written to this register is added to the
          number of 8byte words to be read and processes for
          the low priority dma queue.


  - name: DPI_DMA(0..7)_IBUFF_SADDR
    address: 0x1DF0000000280 + a*0x8
    bus: NCB
    description: |
      DPI_DMA[0..7]_IBUFF_SADDR = DMA Instruction Buffer Starting Address
      The address to start reading Instructions from for DMA[0..7].
    fields:
      - name: --
        bits: 63..62
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: CSIZE
        bits: 61..48
        access: R/W
        reset: 0x40
        typical: --
        description: |
          The size in 8B words of the DMA Instruction Chunk.
          This value should only be written at known times
          in order to prevent corruption of the instruction
          queue.  The minimum CSIZE is 16 (one cacheblock).

      - name: --
        bits: 47..41
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: IDLE
        bits: 40
        access: RO/H
        reset: 1
        typical: --
        description: DMA Request Queue is IDLE

      - name: --
        bits: 39..36
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: SADDR
        bits: 35..7
        access: R/W/H
        reset: 0x0
        typical: --
        description: |
          The 128 byte aligned starting or chunk address.
          SADDR is address bit 35:7 of the starting
          instructions address. When new chunks are fetched
          by the HW, SADDR will be updated to reflect the
          address of the current chunk.
          A write to SADDR resets both the queue's doorbell
          (DPI_DMAx_COUNTS[DBELL) and its tail pointer
          (DPI_DMAx_NADDR[ADDR]).

      - name: --
        bits: 6..0
        access: RAZ
        reset: --
        typical: --
        description: Reserved.


  - name: DPI_DMA(0..7)_COUNTS
    address: 0x1DF0000000300 + a*0x8
    bus: NCB
    description: |
      DPI_DMA[0..7]_COUNTS = DMA Instruction Counts
      Values for determing the number of instructions for DMA[0..7] in the DPI.
    fields:
      - name: --
        bits: 63..39
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: FCNT
        bits: 38..32
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: |
          Number of words in the Instruction FIFO locally
          cached within DPI.

      - name: DBELL
        bits: 31..0
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: Number of available words of Instructions to read.


  - name: DPI_DMA(0..7)_NADDR
    address: 0x1DF0000000380 + a*0x8
    bus: NCB
    description: |
      DPI_DMA[0..7]_NADDR = DMA Next Ichunk Address
      Place DPI will read the next Ichunk data from.
    fields:
      - name: --
        bits: 63..36
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: ADDR
        bits: 35..0
        access: RO/H
        reset: 0x0
        typical: --
        description: |
          "The next L2C address to read DMA# instructions
          from."


  - name: DPI_DMA(0..7)_REQBNK0
    address: 0x1DF0000000400 + a*0x8
    bus: NCB
    description: |
      DPI_DMA[0..7]_REQBNK0 = DMA Request State Bank0
      Current contents of the request state machine - bank0
    fields:
      - name: STATE
        bits: 63..0
        access: RO/H
        reset: 0x0
        typical: --
        description: State


  - name: DPI_DMA(0..7)_REQBNK1
    address: 0x1DF0000000480 + a*0x8
    bus: NCB
    description: |
      DPI_DMA[0..7]_REQBNK1 = DMA Request State Bank1
      Current contents of the request state machine - bank1
    fields:
      - name: STATE
        bits: 63..0
        access: RO/H
        reset: 0x0
        typical: --
        description: State


  - name: DPI_NCB(0..0)_CFG
    address: 0x1DF0000000800 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..6
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: MOLR
        bits: 5..0
        access: R/W
        reset: 0x20
        typical: 0x20
        description: |
          Max Outstanding Load Requests
          Limits the number of oustanding load requests on
          the NCB interface.  This value can range from 1
          to 32. Setting a value of 0 will halt all read
          traffic to the NCB interface.  There are no
          restrictions on when this value can be changed.


  - name: DPI_PINT_INFO
    title: DPI Packet Interrupt Info
    address: 0x1DF0000000830
    bus: NCB
    description: DPI Packet Interrupt Info.
    fields:
      - name: --
        bits: 63..14
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: IINFO
        bits: 13..8
        access: RO/H
        reset: 0x0
        typical: --
        description: Packet Instruction Doorbell count overflow info

      - name: --
        bits: 7..6
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: SINFO
        bits: 5..0
        access: RO/H
        reset: 0x0
        typical: --
        description: Packet Scatterlist Doorbell count overflow info


  - name: DPI_REQ_ERR_SKIP_COMP
    address: 0x1DF0000000838
    bus: NCB
    fields:
      - name: --
        bits: 63..24
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: EN_RST
        bits: 23..16
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue should skip the
          completion  phase once an port reset is
          detected as indicated by DPI_REQ_ERR_RST.  All
          completions to the effected instruction queue
          will be skipped as long as
          DPI_REQ_ERR_RSP[QERR<ique>] & EN_RSP<ique> or
          DPI_REQ_ERR_RST[QERR<ique>] & EN_RST<ique> are
          set.

      - name: --
        bits: 15..8
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: EN_RSP
        bits: 7..0
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue should skip the
          completion  phase once an ErrorResponse is
          detected as indicated by DPI_REQ_ERR_RSP.  All
          completions to the effected instruction queue
          will be skipped as long as
          DPI_REQ_ERR_RSP[QERR<ique>] & EN_RSP<ique> or
          DPI_REQ_ERR_RST[QERR<ique>] & EN_RST<ique> are
          set.


  - name: DPI_ENG(0..5)_BUF
    address: 0x1DF0000000880 + a*0x8
    bus: NCB
    internal: |
      The total amount of storage allocated to the 6 DPI DMA engines (via DPI_ENG*_BUF[BLKS]) must
      not exceed 8KB.
    fields:
      - name: --
        bits: 63..37
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: COMPBLKS
        bits: 36..32
        access: RO/H
        reset: --
        typical: --
        description: Computed engine block size

      - name: --
        bits: 31..9
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: BASE
        bits: 8..4
        access: RO/H
        reset: --
        typical: --
        description: The base address in 512B blocks of the engine fifo

      - name: BLKS
        bits: 3..0
        access: R/W
        reset: 0x2
        typical: --
        description: |
          The size of the engine fifo
          Legal values are 0-10.
          0  = Engine is disabled
          1  = 0.5KB buffer
          2  = 1.0KB buffer
          3  = 1.5KB buffer
          4  = 2.0KB buffer
          5  = 2.5KB buffer
          6  = 3.0KB buffer
          7  = 3.5KB buffer
          8  = 4.0KB buffer
          9  = 6.0KB buffer
          10 = 8.0KB buffer


  - name: DPI_SLI_PRT(0..2)_CFG
    address: 0x1DF0000000900 + a*0x8
    bus: NCB
    description: |
      DPI_SLI_PRTx_CFG = DPI SLI Port Configuration
      Configures the Max Read Request Size, Max Paylod Size, and Max Number of SLI Tags in use
    fields:
      - name: --
        bits: 63..25
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: HALT
        bits: 24
        access: RO/H
        reset: 0
        typical: 0
        description: |
          When set, HALT indicates that the MAC has detected
          a reset condition. No further instructions that
          reference the MAC from any instruction Q will be
          issued until the MAC comes out of reset and HALT
          is cleared in SLI_CTL_PORTx[DIS_PORT].

      - name: --
        bits: 23..20
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: --
        bits: 19..17
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: RD_MODE
        bits: 16
        access: R/W
        reset: 0
        typical: 0
        description: |
          Read Mode
          0=Exact Read Mode
          If the port is a PCIe port, the HW reads on a
          4B granularity.  In this mode, the HW may break
          a given read into 3 operations to satisify
          PCIe rules.
          INTERNAL: If the port is a SRIO port, the HW follows the
          SRIO read rules from the SRIO specification and
          only issues 32*n, 16, and 8 byte  operations
          on the SRIO bus.
          1=Block Mode
          The HW will read more data than requested in
          order to minimize the number of operations
          necessary to complete the operation.
          The memory region must be memory like.

      - name: --
        bits: 15..14
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: MOLR
        bits: 13..8
        access: R/W/H
        reset: --
        typical: --
        description: |
          Max Outstanding Load Requests
          Limits the number of oustanding load requests on
          the port by restricting the number of tags
          used by the SLI to track load responses.  This
          value can range from 1 to 32 depending on the MAC
          type and number of lanes.
          MAC == PCIe / 4 lanes: Max is 32
          MAC == PCIe / 2 lanes: Max is 16
          MAC == PCIe / 1 lane:  Max is  8
          Reset value is computed based on the MAC config.
          Setting MOLR to a value of 0 will halt all read
          traffic to the port.  There are no restrictions
          on when this value can be changed.

      - name: MPS_LIM
        bits: 7
        access: R/W
        reset: 0
        typical: 0
        description: |
          MAC memory space write requests cannot cross the
          (naturally-aligned) MPS boundary.
          When clear, DPI is allowed to issue a MAC memory
          space read that crosses the naturally-aligned
          boundary of size defined by MPS. (DPI will still
          only cross the boundary when it would eliminate a
          write by doing so.)
          When set, DPI will never issue a MAC memory space
          write that crosses the naturally-aligned boundary
          of size defined by MPS.

      - name: --
        bits: 6..5
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: MPS
        bits: 4
        access: R/W
        reset: 0
        typical: 0
        description: |
          Max Payload Size
          0 = 128B
          1 = 256B
          For PCIe MACs, this MPS size must not exceed
          the size selected by PCIE*_CFG030[MPS].
          INTERNAL: For sRIO MACs, all MPS values are allowed.

      - name: MRRS_LIM
        bits: 3
        access: R/W
        reset: 0
        typical: 0
        description: |
          MAC memory space read requests cannot cross the
          (naturally-aligned) MRRS boundary.
          When clear, DPI is allowed to issue a MAC memory
          space read that crosses the naturally-aligned
          boundary of size defined by MRRS. (DPI will still
          only cross the boundary when it would eliminate a
          read by doing so.)
          When set, DPI will never issue a MAC memory space
          read that crosses the naturally-aligned boundary
          of size defined by MRRS.

      - name: --
        bits: 2
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: MRRS
        bits: 1..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Max Read Request Size
          0 = 128B
          1 = 256B
          2 = 512B
          3 = 1024B
          For PCIe MACs, this MRRS size must not exceed
          the size selected by PCIE*_CFG030[MRRS].
          INTERNAL: For sRIO MACs, this MRRS size must be <= 256B.


  - name: DPI_SLI_PRT(0..2)_ERR
    address: 0x1DF0000000920 + a*0x8
    bus: NCB
    description: |
      DPI_SLI_PRTx_ERR = DPI SLI Port Error Info
      Logs the Address and Request Queue associated with the reported SLI error response
    fields:
      - name: ADDR
        bits: 63..3
        access: RO/H
        reset: 0x0
        typical: --
        description: |
          Address of the failed load request.
          Address is locked along with the
          DPI_SLI_PRTx_ERR_INFO register.
          See the DPI_SLI_PRTx_ERR_INFO[LOCK] description
          for further information.

      - name: --
        bits: 2..0
        access: RAZ
        reset: --
        typical: --
        description: Reserved.


  - name: DPI_SLI_PRT(0..2)_ERR_INFO
    address: 0x1DF0000000940 + a*0x8
    bus: NCB
    description: |
      DPI_SLI_PRTx_ERR_INFO = DPI SLI Port Error Info
      Logs the Address and Request Queue associated with the reported SLI error response
    fields:
      - name: --
        bits: 63..9
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: LOCK
        bits: 8
        access: RO/H
        reset: 0
        typical: --
        description: |
          DPI_SLI_PRTx_ERR and DPI_SLI_PRTx_ERR_INFO have
          captured and locked contents.
          When Octeon first detects an ErrorResponse, the
          TYPE, REQQ, and ADDR of the error is saved and an
          internal lock state is set so the data associated
          with the initial error is perserved.
          Subsequent ErrorResponses will optionally raise
          an interrupt, but will not modify the TYPE, REQQ,
          or ADDR fields until the internal lock state is
          cleared.
          SW can clear the internal lock state by writting
          a '1' to the appropriate bit in either
          DPI_REQ_ERR_RSP or DPI_PKT_ERR_RSP depending on
          the TYPE field.
          Once the internal lock state is cleared,
          the next ErrorResponse will set the TYPE, REQQ,
          and ADDR for the new transaction.

      - name: --
        bits: 7..5
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: TYPE
        bits: 4
        access: RO/H
        reset: 0
        typical: --
        attributes:
          exempt_keyword: "True"
        description: |
          Type of transaction that caused the ErrorResponse.
          0=DMA Instruction
          1=PKT Instruction

      - name: --
        bits: 3
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: REQQ
        bits: 2..0
        access: RO/H
        reset: 0x0
        typical: --
        description: Request queue that made the failed load request.


  - name: DPI_INFO_REG
    address: 0x1DF0000000980
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: FFP
        bits: 7..4
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: Force Forward Progress Indicator

      - name: --
        bits: 3..2
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: NCB
        bits: 1
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          NCB Register Access
          This interrupt will fire in normal operation
          when SW reads a DPI register through the NCB
          interface.

      - name: RSL
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          RSL Register Access
          This interrupt will fire in normal operation
          when SW reads a DPI register through the RSL
          interface.


  - name: DPI_DMA(0..7)_IFLIGHT
    address: 0x1DF0000000A00 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..3
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: CNT
        bits: 2..0
        access: R/W/H
        reset: 0x6
        typical: 0x6
        description: |
          The number of instructions from a given queue that
          can be inflight to the DMA engines at a time.
          Reset value matches the number of DMA engines.


  - name: DPI_DMA(0..7)_ERR_RSP_STATUS
    address: 0x1DF0000000A80 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..6
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: STATUS
        bits: 5..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          QUE captures the ErrorResponse status of the last
          6 instructions for each instruction queue.
          STATUS<5> represents the status for first
          instruction in instruction order while STATUS<0>
          represents the last or most recent instruction.
          If STATUS<n> is set, then the nth instruction in
          the given queue experienced an ErrorResponse.
          Otherwise, it completed normally.


  - name: DPI_DMA_PP(0..3)_CNT
    address: 0x1DF0000000B00 + a*0x8
    bus: NCB
    description: |
      DPI_DMA_PP[0..3]_CNT  = DMA per PP Instr Done Counter
      When DMA Instruction Completion Interrupt Mode DPI_DMA_CONTROL.DICI_MODE is enabled, every dma
      instruction
      that has the WQP=0 and a PTR value of 1..4 will incremrement DPI_DMA_PPx_CNT value-1 counter.
      Instructions with WQP=0 and PTR values higher then 0x3F will still send a zero byte write.
      Hardware reserves that values 5..63 for future use and will treat them as a PTR of 0 and do
      nothing.
    fields:
      - name: --
        bits: 63..16
        access: RAZ
        reset: --
        typical: --
        description: Reserved.

      - name: CNT
        bits: 15..0
        access: R/W/H
        reset: 0x0
        typical: --
        description: |
          Counter incremented according to conditions
          described above and decremented by values written
          to this field.  A CNT of non zero, will cause
          an interrupt in the CIU_SUM1_PP@_IPX register



