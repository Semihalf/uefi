# -*- csr3 -*-
# You must run "csr3 rtl" after editing this file!
---
name: DPI
enums:
  - name: DPI_HDR_PT_E
    attributes:
      width: "2"
    description: Enumerates the pointer type.
    values:
      - name: ZBW_CA
        value: 0x0
        description: Zero-byte-write with cache allocate

      - name: ZBW_NC
        value: 0x1
        description: Zero-byte-write with no cache allocate.

      - name: WQP
        value: 0x2
        description: Pointer is work queue entry pointer for SSO.

      - name: CNT
        value: 0x3
        description: |
          PTR<5:0> indicates which counter to increment.


  - name: DPI_INTSN_E
    attributes:
      width: "20"
    description: Enumerates the different DPI-generated interrupts.
    values:
      - name: DPI_INT_NDERR
        value: 0xDF000
        description: See DPI_INT_REG[NDERR].

      - name: DPI_INT_NFOVR
        value: 0xDF001
        description: See DPI_INT_REG[NFOVR].

      - name: DPI_INT_DMADBO(0..7)
        value: 0xDF002 + a
        attributes:
          exempt_natural_alignment: "a"
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[DMADBO<a>].

      - name: DPI_INT_REQ_BADADR
        value: 0xDF00A
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_BADADR].

      - name: DPI_INT_REQ_BADLEN
        value: 0xDF00B
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_BADLEN].

      - name: DPI_INT_REQ_OVFLW
        value: 0xDF00C
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_OVRFLW].

      - name: DPI_INT_REQ_UNDFLW
        value: 0xDF00D
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_UNDFLW].

      - name: DPI_INT_REQ_ANULL
        value: 0xDF00E
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_ANULL].

      - name: DPI_INT_REQ_INULL
        value: 0xDF00F
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_INULL].

      - name: DPI_INT_REQ_BADFIL
        value: 0xDF010
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[REQ_BADFIL].

      - name: DPI_INT_SPRT0_RST
        value: 0xDF011
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[SPRT0_RST].

      - name: DPI_INT_SPRT1_RST
        value: 0xDF012
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[SPRT1_RST].

      - name: DPI_INT_SPRT2_RST
        value: 0xDF013
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[SPRT2_RST].

      - name: DPI_INT_SPRT3_RST
        value: 0xDF014
        attributes:
          intsn_lsb_mismatch: "True"
        description: See DPI_INT_REG[SPRT3_RST].

      - name: DPI_ERR_RAM_DBE(0..30)
        value: 0xDF015 + a
        attributes:
          exempt_natural_alignment: "a"
          intsn_lsb_mismatch: "True"
        description: See DPI_ECC_INT[RAM_DBE<a>].

      - name: DPI_ERR_RAM_SBE(0..30)
        value: 0xDF034 + a
        attributes:
          exempt_natural_alignment: "a"
          intsn_lsb_mismatch: "True"
        description: See DPI_ECC_INT[RAM_SBE<a>].


structs:
  - name: DPI_DMA_INSTR_HDR_S
    attributes:
      allow_missing_bits: "True"
    description: DPI DMA Instruction Header Format
    fields:
      - name: AURA
        bits: w0(11..0)
        description: |
          New field for 78xx.
          FPA Aura.  Indicates the AURA sent to FPA when HW determines that buffers are to be freed
          based on FL, II, and LocalPtr[I].

      - name: --
        bits: w0(15..12)
        description: Reserved for extending AURA.

      - name: TT
        bits: w0(17..16)
        description: |
          New field for 78xx.
          SSO Tag Type.  Sent to SSO upon instruction completion if PT == DPI_HDR_PT_WQP.

      - name: GRP
        bits: w0(27..18)
        description: SSO Group.  Sent to SSO upon instruction completion if PT == DPI_HDR_PT_WQP.

      - name: --
        bits: w0(29..28)
        description: Reserved for extending GRP.

      - name: --
        bits: w0(31..30)
        description: Reserved.

      - name: NFST
        bits: w0(35..32)
        description: |
          See HRM.
          Number of first pointers.

      - name: --
        bits: w0(36)
        description: Reserved for extending NFST.

      - name: --
        bits: w0(37)
        description: Reserved.

      - name: NLST
        bits: w0(41..38)
        description: |
          See HRM.
          Number of last pointers.

      - name: --
        bits: w0(42)
        description: Reserved for extending NLST.

      - name: DEALLOCE
        bits: w0(43)
        description: |
          Refer to DMA Instruction-Header Format, word0<43>. Dealloc value enable.
          ...

      - name: PT
        bits: w0(45..44)
        description: |
          Formerly WPQ.  See WQP description for most.  Add two flavors of cached and uncached ZBW.
          Pointer type.  Determines the contents of the PTR field.  See DPI_HDR_PT_E.

      - name: --
        bits: w0(46)
        description: Reserved for extending PT.

      - name: FL
        bits: w0(47)
        description: |
          Refer to DMA Instruction-Header Format, word0<47>. Free local buffer.
          ...

      - name: II
        bits: w0(48)
        description: |
          Refer to DMA Instruction-Header Format, word0<48>. Ignore the I bit (i.e. the I bit of the
          DPI DMA instruction local pointer. See DPI DMA Local-Pointer Format).
          ...

      - name: FI
        bits: w0(49)
        description: |
          Refer to DMA Instruction-Header Format, word0<49>. Force interrupt.
          ...

      - name: CA
        bits: w0(50)
        description: |
          Refer to DMA Instruction-Header Format, word0<50>. Counter add.
          ...

      - name: CSEL
        bits: w0(51)
        description: |
          Refer to DMA Instruction-Header Format, word0<51>. Counter. 1 = use counter 1, 0 = use
          counter 0.
          ...

      - name: XTYPE
        bits: w0(53..52)
        description: |
          Formerly TYPE.  See HRM.
          Transfer type.
          0 = Outbound
          1 = Inbound
          2 = Internal-only
          3 = External-only

      - name: --
        bits: w0(55..54)
        description: Reserved for extending TYPE.

      - name: FPORT
        bits: w0(57..56)
        description: |
          See HRM.
          First port.

      - name: --
        bits: w0(59..58)
        description: Reserved for extending FPORT.

      - name: LPORT
        bits: w0(61..60)
        description: |
          See HRM.
          Last port.

      - name: --
        bits: w0(63..62)
        description: Reserved for extending LPORT.

      - name: PTR
        bits: w1(41..0)
        description: |
          See HRM.
          Pointer.

      - name: --
        bits: w1(47..42)
        description: Reserved for extending PTR.

      - name: DEALLOCV
        bits: w1(63..48)
        description: |
          See HRM.
          Dealloc value to decrement the aura count on the instruction's final pointer return.


  - name: DPI_DMA_LOCAL_PTR_S
    attributes:
      allow_missing_bits: "True"
    description: DPI DMA Local Pointer Format
    fields:
      - name: PTR
        bits: 41..0
        description: |
          See HRM.
          Pointer.

      - name: --
        bits: 46..42
        description: Reserved for extending PTR.

      - name: L
        bits: 47
        description: |
          Refer to DPI DMA Local-Pointer Format word0<47>. Little-endian.
          ...

      - name: SIZE
        bits: 60..48
        description: |
          Refer to DPI DMA Local-Pointer Format word0<60:48>. Size in bytes of the contiguous space
          specified by PTR. A Size value of 0 is illegal.
          ...

      - name: AC
        bits: 61
        description: |
          Refer to DPI DMA Local-Pointer Format word0<61>. Allocate L2.
          ...

      - name: F
        bits: 62
        description: |
          Refer to DPI DMA Local-Pointer Format word0<62>. Full-block write operations are allowed.
          ...

      - name: I
        bits: 63
        description: |
          Refer to DPI DMA Local-Pointer Format, word0<63>. Invert free.
          ...


registers:
  - name: DPI_BIST_STATUS
    title: DPI BIST Status Register
    address: 0x1DF0000000000
    bus: NCB
    description: This is the built-in self-test (BIST) status register.
    attributes:
      dv_bist_all_fail_test: "ALL"
    fields:
      - name: --
        bits: 63..45
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: BIST
        bits: 44..0
        access: RO
        reset: 0x0
        typical: 0x0
        description: BIST results. Hardware sets a bit in BIST for memory that fails.


  - name: DPI_INT_REG
    title: DPI Interrupt Register
    address: 0x1DF0000000008
    bus: NCB
    description: This register contains error flags for DPI.
    fields:
      - name: --
        bits: 63..28
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: SPRT3_RST
        bits: 27
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          SLI port 3 in-reset error. DMA instruction was dropped because the source or destination
          port was in reset. Throws DPI_INTSN_E::SPRT3_RST.

      - name: SPRT2_RST
        bits: 26
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          SLI port 2 in-reset error. DMA instruction was dropped because the source or destination
          port was in reset. Throws DPI_INTSN_E::SPRT2_RST.

      - name: SPRT1_RST
        bits: 25
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          SLI port 1 in-reset error. DMA instruction was dropped because the source or destination
          port was in reset. Throws DPI_INTSN_E::SPRT1_RST.

      - name: SPRT0_RST
        bits: 24
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          SLI port 0 in-reset error 0. DMA instruction was dropped because the source or destination
          port was in reset. Throws DPI_INTSN_E::SPRT0_RST.

      - name: --
        bits: 23
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: REQ_BADFIL
        bits: 22
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Unexpected fill error. This bit is set when an instruction fill is received when there is
          no outstanding request. Throws DPI_INTSN_E::REQ_BADFIL.

      - name: REQ_INULL
        bits: 21
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Null pointer error. This bit is set when an instruction's next pointer is NULL. Throws
          DPI_INTSN_E::REQ_INULL.

      - name: REQ_ANULL
        bits: 20
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Instruction bad error. This bit is set when a fetched instruction word was 0x0. Throws
          DPI_INTSN_E::REQ_ANULL.

      - name: REQ_UNDFLW
        bits: 19
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Instruction FIFO underflow error. This bit is set when the instruction FIFO underflows.
          Throws DPI_INTSN_E::REQ_UNDFLW.

      - name: REQ_OVRFLW
        bits: 18
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Instruction FIFO overflow error. This bit is set when the instruction FIFO overflows.
          Throws DPI_INTSN_E::REQ_OVRFLW.

      - name: REQ_BADLEN
        bits: 17
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Fetch with length zero error. This bit is set when DPI forms an instruction fetch with
          length of zero. Throws DPI_INTSN_E::REQ_BADLEN.

      - name: REQ_BADADR
        bits: 16
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          Fetch with bad pointer error. This bit is set when DPI forms an instruction fetch to the
          NULL pointer. Throws DPI_INTSN_E::REQ_BADADR.

      - name: DMADBO
        bits: 15..8
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          Doorbell overflow error. DPI has a 32-bit counter for each request queue's outstanding
          doorbell counts. A bit is set when the corresponding doorbell count overflows. Throws
          DPI_INTSN_E::DPI_INT_DMADBO.

      - name: --
        bits: 7..2
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: NFOVR
        bits: 1
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          CSR FIFO overflow error. DPI can store up to 16 CSR requests, and the FIFO overflows if
          that number is exceeded. Throws DPI_INTSN_E::DPI_INT_NFOVR.

      - name: NDERR
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          IOI decode error. This bit is set when the DPI received an IOI transaction on the outbound
          bus to the DPI device ID, but the command was not recognized. Throws
          DPI_INTSN_E::DPI_INT_NDERR.


  - name: DPI_INT_EN
    address: 0x1DF0000000010
    bus: NCB
    fields:
      - name: --
        bits: 63..28
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: SPRT3_RST
        bits: 27
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT2_RST
        bits: 26
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT1_RST
        bits: 25
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: SPRT0_RST
        bits: 24
        access: R/W/H
        reset: 0
        typical: 0
        description: |
          DMA instruction was dropped because the source or
          destination port was in reset.
          this bit is set.

      - name: --
        bits: 23
        access: R/W
        reset: --
        typical: --
        description: Reserved.

      - name: REQ_BADFIL
        bits: 22
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction unexpected fill

      - name: REQ_INULL
        bits: 21
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction filled with NULL pointer

      - name: REQ_ANULL
        bits: 20
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction filled with bad instruction

      - name: REQ_UNDFLW
        bits: 19
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction FIFO underflow

      - name: REQ_OVRFLW
        bits: 18
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction FIFO overflow

      - name: REQ_BADLEN
        bits: 17
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction fetch with length

      - name: REQ_BADADR
        bits: 16
        access: R/W/H
        reset: 0
        typical: 0
        description: DMA instruction fetch with bad pointer

      - name: DMADBO
        bits: 15..8
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: DMAx doorbell overflow.

      - name: --
        bits: 7..2
        access: R/W
        reset: 0x0
        typical: 0x0
        description: Reserved.

      - name: NFOVR
        bits: 1
        access: R/W
        reset: 0
        typical: 0
        description: CSR Fifo Overflow

      - name: NDERR
        bits: 0
        access: R/W
        reset: 0
        typical: 0
        description: NCB Decode Error


  - name: DPI_ECC_CTL
    title: DPI ECC Control 0 Register
    address: 0x1DF0000000018
    bus: NCB
    description: This register allows inserting ECC errors for testing.
    attributes:
      dv_fc_scratch: "ALL"
    fields:
      - name: --
        bits: 63..48
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: RAM_CDIS
        bits: 47..32
        access: R/W
        reset: 0x0
        typical: 0x0
        description: RDB RAM ECC correction disable. Each bit corresponds to a different RAM.

      - name: RAM_FLIP1
        bits: 31..16
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Flip syndrome bits on write. Flip syndrome bits <1> on writes to the corresponding RDB ram
          to test single-bit or double-bit error handling.

      - name: RAM_FLIP0
        bits: 15..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Flip syndrome bits on write. Flip syndrome bits <0> on writes to the corresponding RDB ram
          to test single-bit or double-bit error handling.


  - name: DPI_ECC_INT
    title: DPI ECC Control 1 Register
    address: 0x1DF0000000020
    bus: NCB
    description: This register contains ECC error interrupt summary bits.
    fields:
      - name: --
        bits: 63
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: RAM_DBE
        bits: 62..32
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          Set when a double-bit error is detected in the corresponding ram. Throws
          DPI_INTSN_E::DPI_ERR_RAM_DBE.

      - name: --
        bits: 31
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: RAM_SBE
        bits: 30..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          Set when a single-bit error is detected in the corresponding ram. Throws
          DPI_INTSN_E::DPI_ERR_RAM_SBE.


  - name: DPI_NCB_CTL
    address: 0x1DF0000000028
    bus: NCB
    fields:
      - name: --
        bits: 63..1
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: PRT
        bits: 0
        access: R/W
        reset: 0
        typical: 0
        description: Directs traffic to the specified NCB unit.


  - name: DPI_SWA_Q_VMID
    address: 0x1DF0000000030
    bus: NCB
    description: This register defines.
    fields:
      - name: VMID7
        bits: 63..56
        access: R/W
        reset: 0x0
        typical: 0x0
        description: The SWA VMID for Queue 7.

      - name: VMID6
        bits: 55..48
        access: R/W
        reset: 0x0
        typical: 0x0
        description: The SWA VMID for Queue 6.

      - name: VMID5
        bits: 47..40
        access: R/W
        reset: 0x0
        typical: 0x0
        description: The SWA VMID for Queue 5.

      - name: VMID4
        bits: 39..32
        access: R/W
        reset: 0x0
        typical: 0x0
        description: The SWA VMID for Queue 4.

      - name: VMID3
        bits: 31..24
        access: R/W
        reset: 0x0
        typical: 0x0
        description: The SWA VMID for Queue 3.

      - name: VMID2
        bits: 23..16
        access: R/W
        reset: 0x0
        typical: 0x0
        description: The SWA VMID for Queue 2.

      - name: VMID1
        bits: 15..8
        access: R/W
        reset: 0x0
        typical: 0x0
        description: The SWA VMID for Queue 1.

      - name: VMID0
        bits: 7..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: The SWA VMID for Queue 0.


  - name: DPI_CTL
    title: DPI Control Register
    address: 0x1DF0000000040
    bus: NCB
    description: This register provides the enable bit for the DMA and packet state machines.
    fields:
      - name: --
        bits: 63..1
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 0
        access: R/W
        reset: 0
        typical: 1
        description: Turns on the DMA and packet state machines.


  - name: DPI_DMA_CONTROL
    title: DPI DMA Control Register
    address: 0x1DF0000000048
    bus: NCB
    description: This register controls the operation of DMA input and output.
    fields:
      - name: --
        bits: 63..60
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: FFP_DIS
        bits: 59
        access: R/W
        reset: 0
        typical: 0
        description: |
          Force forward progress disable. The DMA engines will compete for shared resources. If the
          hardware detects that particular engines are not able to make requests to an interface,
          the hardware will periodically trade-off throughput for fairness.

      - name: COMMIT_MODE
        bits: 58
        access: R/W
        reset: 0
        typical: 1
        description: |
          DMA engine commit mode.
          When COMMIT_MODE=0, DPI considers an instruction complete when the hardware internally
          generates the final write for the current instruction.
          When COMMIT_MODE=1, DPI additionally waits for the final write to reach the interface
          coherency point to declare the instructions complete.
          Please note: when COMMIT_MODE == 0, DPI may not follow the HRM ordering rules. DPI
          hardware performance may be better with COMMIT_MODE == 0 than with COMMIT_MODE == 1 due to
          the relaxed ordering rules. If the HRM ordering rules are required, set COMMIT_MODE == 1.

      - name: --
        bits: 57
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: PKT_EN
        bits: 56
        access: R/W
        reset: 0
        typical: --
        description: |
          Enables the packet interface. When the packet interface is enabled, engines 4 and 5 are
          used for packets and are not available for DMA. When PKT_EN=1, then DMA_ENB<5>=0 and
          DMA_ENB<4>=0.

      - name: --
        bits: 55..54
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: DMA_ENB
        bits: 53..48
        access: R/W
        reset: 0x0
        typical: 0x3f
        description: |
          DMA engine enable. Enables the operation of the DMA engine. After being enabled an engine
          should not be disabled while processing instructions.
          When PKT_EN=1, then DMA_ENB<5>=0 and DMA_ENB<4>=0.

      - name: --
        bits: 47..34
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: B0_LEND
        bits: 33
        access: R/W
        reset: 0
        typical: 0
        description: |
          Little-endian. When set to 1 and the DPI is in the mode to write 0 to L2C when a DMA
          transaction is done, the address to be written is treated as a little-endian address.

      - name: LDWB
        bits: 32
        access: R/W
        reset: 0
        typical: --
        description: |
          Load Dont Write Back
          When set, the HW will be able to issue LDWB commands to the cache.  As
          a result the line will not be written back when replaced.  When clear,
          the HW will issue regular load commands to the cache which will cause
          the line to be written back before being replaced.

      - name: AURA_ICHK
        bits: 31..20
        access: R/W
        reset: 0x0
        typical: --
        description: |
          The AURA that the Instruction Chunk for DMA operations page will be
          returned to when freed.

      - name: O_ADD1
        bits: 19
        access: R/W
        reset: 0
        typical: 1
        description: |
          Add one.
          1 = add 1 to the SLI SLI_DMA*_CNT DMA counters
          0 = the number of bytes in the DMA transfer is added to SLI_DMA*_CNT.

      - name: O_RO
        bits: 18
        access: R/W
        reset: 0
        typical: --
        description: Relaxed ordering mode for DMA transactions

      - name: O_NS
        bits: 17
        access: R/W
        reset: 0
        typical: --
        description: No snoop.

      - name: O_ES
        bits: 16..15
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Endian swap mode for DMA.
          0 = pass-through mode (no swap)
          1 = 64-bit byte-swap mode [ABCD_EFGH] -> [HGFE_DCBA]
          2 = 32-bit byte-swap mode [ABCD_EFGH] -> [DCBA_HGFE]
          3 = 32-bit exchange mode [ABCD_EFGH] -> [EFGH_ABCD]

      - name: O_MODE
        bits: 14
        access: R/W
        reset: 0
        typical: 1
        description: |
          Select PCI_POINTER mode.
          0 = DPTR format 1 is used. Use register values for address; use pointer values for ES, NS,
          RO.
          1 = DPTR format 0 is used. Use pointer values for address; use register values for ES, NS,
          RO.

      - name: --
        bits: 13..0
        access: --
        reset: --
        typical: --
        description: Reserved.


  - name: DPI_REQ_GBL_EN
    title: DPI Request Global Enable Register
    address: 0x1DF0000000050
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: QEN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Indicates which instruction queues are enabled, and can dispatch instructions to a
          requesting engine.


  - name: DPI_REQ_ERR_RSP
    title: DPI Instruction Queue ErrorResponse Register
    address: 0x1DF0000000058
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: QERR
        bits: 7..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue received an ErrorResponse from the I/O subsystem.
          Software must clear the bit before the corresponding instruction queue will continue
          processing instructions if DPI_REQ_ERR_RSP_EN[EN] is set.


  - name: DPI_REQ_ERR_RST
    title: DPI Instruction Queue Reset Error Register
    address: 0x1DF0000000060
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: QERR
        bits: 7..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue dropped an instruction because the source or destination
          was in reset. Software must clear the bit before the corresponding instruction queue will
          continue processing instructions if DPI_REQ_ERR_RST_EN[EN] is set.


  - name: DPI_REQ_ERR_RSP_EN
    title: DPI Instruction Queue ErrorResponse Enable Register
    address: 0x1DF0000000068
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Indicates which instruction queues should stop dispatching instructions when an
          ErrorResponse is received from the I/O subsystem.


  - name: DPI_REQ_ERR_RST_EN
    title: DPI Instruction Queue Reset Error Enable Register
    address: 0x1DF0000000070
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: EN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Indicates which instruction queues should stop dispatching instructions when an
          instruction is dropped because the source or destination port is in reset.


  - name: DPI_PKT_ERR_RSP
    title: DPI Packet Error Response Register
    address: 0x1DF0000000078
    bus: NCB
    fields:
      - name: --
        bits: 63..1
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: PKTERR
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: Indicates that an ErrorResponse was received from the I/O subsystem.


  - name: DPI_DMA_ENG(0..5)_EN
    title: DPI DMA-Engine Queue Enable Registers
    address: 0x1DF0000000080 + a*0x8
    bus: NCB
    description: These registers provide control for the DMA engines.
    fields:
      - name: --
        bits: 63..8
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: QEN
        bits: 7..0
        access: R/W
        reset: 0xff
        typical: 0xff
        description: |
          Instruction queue enable. This field specifies which of eight logical instruction queues
          can be serviced by the DMA engine.
          1 = allow service, 0 = prevent service
          Setting QEN = 0x0 effectively disables the engine. When DPI_DMA_CONTROL[PKT_EN] = 1, then
          DPI_DMA_ENG4/5_EN [QEN] must be zero.


  - name: DPI_DMA(0..7)_REQQ_CTL
    title: DPI DMA Request Queue Control Register
    address: 0x1DF0000000180 + a*0x8
    bus: NCB
    description: This register contains the control bits for transactions on the eight request queues.
    fields:
      - name: --
        bits: 63..9
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: ST_CMD
        bits: 8
        access: R/W
        reset: 0
        typical: 0
        description: |
          When DPI issues a store full line command to the L2C that is to be cached, this field
          select the type of store command to use:
          0 = STF.
          1 = STY.

      - name: --
        bits: 7..2
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: LD_CMD
        bits: 1..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          When DPI issues a load command to the L2C that is to be cached, this field select the type
          of load command to use:
          0 = LDD.
          1 = LDI.
          2 = LDE.
          3 = LDY.


  - name: DPI_DMA(0..7)_DBELL
    title: DPI DMA Doorbell Registers
    address: 0x1DF0000000200 + a*0x8
    bus: NCB
    description: This is the door bell register for the eight DMA instruction queues.
    attributes:
      regtest_skip: "True"
    fields:
      - name: --
        bits: 63..16
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: DBELL
        bits: 15..0
        access: WO/H
        reset: 0x0
        typical: --
        description: |
          Doorbell value. The value written to this register is added to the number of eight-byte
          words to be read and processed for the low-priority DMA queue.


  - name: DPI_DMA(0..7)_IBUFF_SADDR
    title: DPI DMA Instruction-Buffer Starting-Address Registers
    address: 0x1DF0000000280 + a*0x8
    bus: NCB
    description: |
      These registers provide the address to start reading instructions for the eight DMA
      instruction queues.
    fields:
      - name: IDLE
        bits: 63
        access: RO/H
        reset: 1
        typical: --
        description: DMA request queue is idle. When asserted, the associated request queue is idle.

      - name: --
        bits: 62
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: CSIZE
        bits: 61..48
        access: R/W
        reset: 0x40
        typical: --
        description: |
          The size in 8-byte words of the DMA instruction chunk. This value should only be written
          at known times in order to prevent corruption of the instruction queue. The minimum CSIZE
          is 16 (one cache block).

      - name: --
        bits: 47..42
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: SADDR
        bits: 41..7
        access: R/W/H
        reset: 0x0
        typical: --
        description: |
          Starting address. The 128-byte aligned starting or chunk address. SADDR is address bit
          <41:7> of the starting instructions address. When new chunks are fetched by the hardware,
          SADDR is updated to reflect the address of the current chunk. A write to SADDR resets both
          the queue's doorbell (DPI_DMA(0..7)_COUNTS[DBELL) and its tail pointer
          (DPI_DMA(0..7)_NADDR[ADDR]).

      - name: --
        bits: 6..0
        access: --
        reset: --
        typical: --
        description: Reserved.


  - name: DPI_DMA(0..7)_COUNTS
    title: DPI DMA Instruction Counts Registers
    address: 0x1DF0000000300 + a*0x8
    bus: NCB
    description: |
      These registers provide values for determining the number of instructions in the local
      instruction FIFO.
    fields:
      - name: --
        bits: 63..39
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: FCNT
        bits: 38..32
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: FIFO count. Specifies the number of words in the instruction FIFO locally cached within DPI.

      - name: DBELL
        bits: 31..0
        access: RO/H
        reset: 0x0
        typical: 0x0
        description: Doorbell. Specifies the number of available words of instructions to read.


  - name: DPI_DMA(0..7)_NADDR
    title: DPI DMA Next Ichunk Address Registers
    address: 0x1DF0000000380 + a*0x8
    bus: NCB
    description: These registers provide the L2C addresses to read the next Ichunk data.
    fields:
      - name: --
        bits: 63..42
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: ADDR
        bits: 41..0
        access: RO/H
        reset: 0x0
        typical: --
        description: Address. Provides the next L2C address to read instructions.


  - name: DPI_DMA(0..7)_REQBNK0
    title: DPI DMA Request State Bank 0 Registers
    address: 0x1DF0000000400 + a*0x8
    bus: NCB
    description: These registers provide the current contents of the request state machine, bank 0.
    fields:
      - name: STATE
        bits: 63..0
        access: RO/H
        reset: 0x0
        typical: --
        description: State. Provides the current contents of the request state machine.


  - name: DPI_DMA(0..7)_REQBNK1
    title: DPI DMA Request State Bank 1 Registers
    address: 0x1DF0000000480 + a*0x8
    bus: NCB
    description: These registers provide the current contents of the request state machine, bank 1.
    fields:
      - name: STATE
        bits: 63..0
        access: RO/H
        reset: 0x0
        typical: --
        description: State. Provides the current contents of the request state machine.


  - name: DPI_NCB(0)_CFG
    title: DPI IOI Configuration Register
    address: 0x1DF0000000800 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..6
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: MOLR
        bits: 5..0
        access: R/W
        reset: 0x20
        typical: 0x20
        description: |
          Max outstanding load requests. Limits the number of outstanding load requests on the I/O
          Interconnect. This value can range from 1 to 32. Setting a value of 0 halts all read
          traffic to the I/O Interconnect. There are no restrictions on when this value can be
          changed.


  - name: DPI_PINT_INFO
    title: DPI Packet Interrupt Information Register
    address: 0x1DF0000000830
    bus: NCB
    description: This register provides DPI packet interrupt information.
    fields:
      - name: --
        bits: 63..14
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: IINFO
        bits: 13..8
        access: RO/H
        reset: 0x0
        typical: --
        description: Packet instruction doorbell count overflow information.

      - name: --
        bits: 7..6
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: SINFO
        bits: 5..0
        access: RO/H
        reset: 0x0
        typical: --
        description: Packet scatter list doorbell count overflow information.


  - name: DPI_REQ_ERR_SKIP_COMP
    title: DPI Instruction Queue Skip Completion Register
    address: 0x1DF0000000838
    bus: NCB
    fields:
      - name: --
        bits: 63..24
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: EN_RST
        bits: 23..16
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue should skip the completion phase once a port reset is
          detected as indicated by DPI_REQ_ERR_RST. All completions to the effected instruction
          queue are skipped as long as DPI_REQ_ERR_RSP[QERR<ique>] & EN_RSP<ique> or
          DPI_REQ_ERR_RST[QERR<ique>] & EN_RST<ique> are set.

      - name: --
        bits: 15..8
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: EN_RSP
        bits: 7..0
        access: R/W/H
        reset: 0x0
        typical: 0x0
        description: |
          Indicates which instruction queue should skip the completion phase once an ErrorResponse
          is detected as indicated by DPI_REQ_ERR_RSP. All completions to the effected instruction
          queue are skipped as long as DPI_REQ_ERR_RSP[QERR<ique>] & EN_RSP<ique> or
          DPI_REQ_ERR_RST[QERR<ique>] & EN_RST<ique> are set.


  - name: DPI_ENG(0..5)_BUF
    title: DPI DMA Engine Buffer Registers
    address: 0x1DF0000000880 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..37
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: COMPBLKS
        bits: 36..32
        access: RO/H
        reset: --
        typical: --
        description: Computed engine block size

      - name: --
        bits: 31..9
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: BASE
        bits: 8..4
        access: RO/H
        reset: --
        typical: --
        description: The base address in 512-byte blocks of the DMA engine FIFO.

      - name: BLKS
        bits: 3..0
        access: R/W
        reset: 0x2
        typical: --
        description: |
          The size of the DMA engine FIFO. Legal values are 0-10.
          0x0 = Disabled. 0x5 = 2.5KB FIFO.
          0x1 = 0.5KB FIFO. 0x6 = 3KB FIFO.
          0x2 = 1KB FIFO. 0x7 = 3.5KB FIFO.
          0x3 = 1.5KB FIFO. 0x8 = 4KB FIFO.
          0x4 = 2KB FIFO. 0x9 = 6.0KB FIFO.
          0xA = 8.0KB FIFO.


  - name: DPI_SLI_PRT(0..3)_CFG
    title: DPI SLI Port Configuration Register
    address: 0x1DF0000000900 + a*0x8
    bus: NCB
    description: |
      This register configures the max read request size, max payload size, and max number of SLI
      tags in use.
    fields:
      - name: --
        bits: 63..25
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: HALT
        bits: 24
        access: RO/H
        reset: 0
        typical: 0
        description: |
          When set, HALT indicates that the MAC has detected a reset condition. No further
          instructions that reference the MAC from any instruction queue will be issued until the
          MAC comes out of reset and HALT is cleared in SLI_CTL_PORT0/1[DIS_PORT].

      - name: --
        bits: 23..21
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: QLM_CFG
        bits: 20
        access: RO/H
        reset: --
        typical: --
        description: |
          Read only copy of the QLM CFG pin. 0 = MAC is DPI; 1 = reserved.
          Since QLM_CFG is simply a copy of the QLM CFG pins, it could reflect values that are not
          normal for DMA or packet operations. QLM_CFG does not indicate if a port is disabled.
          GSERx_CFG can be used for more complete QLM configuration information.

      - name: --
        bits: 19..17
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: RD_MODE
        bits: 16
        access: R/W
        reset: 0
        typical: 0
        description: |
          Read mode.
          0 = Exact read mode. The hardware reads on a four-byte granularity. In this mode, the
          hardware may break a given read into 3 operations to satisfy DPI rules.
          1 = Block mode. The hardware reads more data than requested in order to minimize the
          number of operations necessary to complete the operation. The memory region must be memory
          like.

      - name: --
        bits: 15..14
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: MOLR
        bits: 13..8
        access: R/W
        reset: 0x20
        typical: 0x20
        description: |
          Maximum outstanding load requests. Limits the number of outstanding load requests on the
          port by restricting the number of tags used by the SLI to track load responses. This value
          can range from 1 to 32. Setting MOLR to a value of 0 halts all read traffic to the port.
          There are no restrictions on when this value can be changed.

      - name: MPS_LIM
        bits: 7
        access: R/W
        reset: 0
        typical: 0
        description: |
          MAC memory space write requests cannot cross the (naturally-aligned) MPS boundary.
          When clear, DPI is allowed to issue a MAC memory- space read that crosses the naturally-
          aligned boundary of size defined by MPS. (DPI will still only cross the boundary when it
          would eliminate a write by doing so.)
          When set, DPI will never issue a MAC memory space write that crosses the naturally-aligned
          boundary of size defined by MPS.

      - name: --
        bits: 6..5
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: MPS
        bits: 4
        access: R/W
        reset: 0
        typical: 0
        description: |
          Maximum payload size.
          0 = 128B.
          1 = 256B.
          The MPS size must not exceed the size selected by DPI*_CFG030[MPS].

      - name: MRRS_LIM
        bits: 3
        access: R/W
        reset: 0
        typical: 0
        description: |
          MAC memory space read requests cannot cross the (naturally-aligned) MRRS boundary.
          When clear, DPI is allowed to issue a MAC memory-space read that crosses the naturally-
          aligned boundary of size defined by MRRS. (DPI will still only cross the boundary when it
          would eliminate a read by doing so.)
          When set, DPI will never issue a MAC memory space read that crosses the naturally-aligned
          boundary of size defined by MRRS.

      - name: --
        bits: 2
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: MRRS
        bits: 1..0
        access: R/W
        reset: 0x0
        typical: 0x0
        description: |
          Maximum read-request size.
          0x0 = 128B.
          0x1 = 256B.
          0x2 = 512B.
          0x3 = 1024B.
          The MRRS size must not exceed the size selected by DPI*_CFG030[MRRS].


  - name: DPI_SLI_PRT(0..3)_ERR
    title: DPI SLI Port Error Address Registers
    address: 0x1DF0000000920 + a*0x8
    bus: NCB
    description: This register logs the address associated with the reported SLI error response.
    fields:
      - name: ADDR
        bits: 63..3
        access: RO/H
        reset: 0x0
        typical: --
        description: |
          Address of the failed load request. Address is locked along with the
          DPI_SLI_PRT(0..3)_ERR_INFO register. See the
          DPI_SLI_PRT(0..3)_ERR_INFO[LOCK] description for further information.

      - name: --
        bits: 2..0
        access: --
        reset: --
        typical: --
        description: Reserved.


  - name: DPI_SLI_PRT(0..3)_ERR_INFO
    title: DPI SLI MAC Port Error Info Registers
    address: 0x1DF0000000940 + a*0x8
    bus: NCB
    description: This register logs information associated with the reported SLI error response.
    fields:
      - name: --
        bits: 63..23
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: VF
        bits: 22..16
        access: RO/H
        reset: 0x0
        typical: --
        description: Virtual function that caused the ErrorResponse.

      - name: --
        bits: 15..9
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: LOCK
        bits: 8
        access: RO/H
        reset: 0
        typical: --
        description: |
          DPI_SLI_PRT(0..3)_ERR and DPI_SLI_PRT(0..3)_ERR_INFO have captured and locked contents.
          When CN78XX first detects an ErrorResponse, the TYPE, REQQ, and ADDR of the error is saved
          and an internal lock state is set so the data associated with the initial error is
          preserved.
          Subsequent ErrorResponses will optionally raise an interrupt, but will not modify the
          TYPE, REQQ, or ADDR fields until the internal lock state is cleared.
          Software can clear the internal lock state by writing a 1 to the appropriate bit in either
          DPI_REQ_ERR_RSP or DPI_PKT_ERR_RSP depending on the TYPE field. Once the internal lock
          state is cleared, the next ErrorResponse will set the TYPE, REQQ, and ADDR for the new
          transaction.

      - name: --
        bits: 7..5
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: TYPE
        bits: 4
        access: RO/H
        reset: 0
        typical: --
        description: |
          Type of transaction that caused the ErrorResponse.
          0 = DMA Instruction.
          1 = PKT Instruction.

      - name: --
        bits: 3
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: REQQ
        bits: 2..0
        access: RO/H
        reset: 0x0
        typical: --
        description: Request queue that made the failed load request.


  - name: DPI_INFO_REG
    title: DPI Information Register
    address: 0x1DF0000000980
    bus: NCB
    fields:
      - name: --
        bits: 63..8
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: FFP
        bits: 7..4
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: Force forward progress indicator.

      - name: --
        bits: 3..2
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: NCB
        bits: 1
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          NCB register access. This interrupt fires in normal operation when software reads a DPI
          register through the IOI interface.

      - name: RSL
        bits: 0
        access: R/W1C/H
        reset: 0
        typical: 0
        description: |
          RSL register access. This interrupt fires in normal operation when software reads a DPI
          register through the RSL interface.


  - name: DPI_DMA(0..7)_IFLIGHT
    title: DPI DMA In-Flight Register
    address: 0x1DF0000000A00 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..3
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: CNT
        bits: 2..0
        access: R/W/H
        reset: 0x6
        typical: 0x6
        description: |
          The number of instructions from a given queue that can be in flight to the DMA engines at
          a time. Reset value matches the number of DMA engines.


  - name: DPI_DMA(0..7)_ERR_RSP_STATUS
    title: DPI DMA Error Response Status Register
    address: 0x1DF0000000A80 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..6
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: STATUS
        bits: 5..0
        access: R/W1C/H
        reset: 0x0
        typical: 0x0
        description: |
          QUE captures the ErrorResponse status of the last 6 instructions for each instruction
          queue. STATUS<5> represents the status for first instruction in instruction order while
          STATUS<0> represents the last or most recent instruction. If STATUS<n> is set, then the
          nth instruction in the given queue experienced an ErrorResponse. Otherwise, it completed
          normally.


  - name: DPI_DMA_PP(0..47)_CNT
    title: DPI DMA Per-Core Instruction Completion Counter Register
    address: 0x1DF0000000C00 + a*0x8
    bus: NCB
    fields:
      - name: --
        bits: 63..16
        access: --
        reset: --
        typical: --
        description: Reserved.

      - name: CNT
        bits: 15..0
        access: R/W/H
        reset: 0x0
        typical: --
        description: |
          DPI DMA per-core instruction completion counter. The counter is incremented according to
          conditions described below and is decremented by values written to this field. A CNT of
          nonzero causes an interrupt in TBD.
          When DPI_DMA_CONTROL[DICI_MODE] is enabled, every DMA instruction that has the WQP=0 and a
          PTR value of 1 to 0x30 will increment DPI_DMA_PP(0..47)_CNT value-1 counter. Instructions
          with WQP=0 and PTR values higher than 0x3F will still send a zero byte write.
          Hardware reserves the values 0x31 to 0x3F for future use and will treat them as a PTR of 0
          and do nothing.



